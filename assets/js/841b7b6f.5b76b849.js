"use strict";(self.webpackChunkkeep_being_human_dev=self.webpackChunkkeep_being_human_dev||[]).push([[59161],{2628:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>o});const c=JSON.parse('{"id":"rails/caching/advanced/dynamic_fragment_caching","title":"dynamic_fragment_caching","description":"\ud83d\udd11 Dynamic Fragment Caching with Versioned Keys","source":"@site/docs/rails/caching/advanced/dynamic_fragment_caching.md","sourceDirName":"rails/caching/advanced","slug":"/rails/caching/advanced/dynamic_fragment_caching","permalink":"/keep-being-human-dev/docs/rails/caching/advanced/dynamic_fragment_caching","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/rails/caching/advanced/dynamic_fragment_caching.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"custom_cache_versioning","permalink":"/keep-being-human-dev/docs/rails/caching/advanced/custom_cache_versioning"},"next":{"title":"http_conditional_caching","permalink":"/keep-being-human-dev/docs/rails/caching/advanced/http_conditional_caching"}}');var i=a(23420),t=a(65404);const r={},s=void 0,d={},o=[{value:"\ud83d\udd11 Dynamic Fragment Caching with Versioned Keys",id:"-dynamic-fragment-caching-with-versioned-keys",level:2}];function l(e){const n={code:"code",h2:"h2",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"-dynamic-fragment-caching-with-versioned-keys",children:"\ud83d\udd11 Dynamic Fragment Caching with Versioned Keys"}),"\n",(0,i.jsx)(n.p,{children:"Tailor fragment cache keys to dynamic data (e.g., user locale, theme, or feature flags) by interpolating runtime values. This practice avoids polluting unrelated caches and ensures each variation is invalidated correctly."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-erb",children:"\x3c!-- app/views/shared/_navigation.html.erb --\x3e\n<% cache [current_user.id, I18n.locale, feature_enabled?(:beta_ui)] do %>\n  <nav>\n    <%# build nav links here %>\n  </nav>\n<% end %>\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ruby",children:"# Optionally define a helper to generate a stable cache key\nmodule CacheKeyHelper\n  def nav_cache_key(user)\n    [user.cache_key_with_version, I18n.locale, feature_enabled?(:beta_ui)]\n  end\nend\n"})}),"\n",(0,i.jsx)(n.p,{children:"Using arrays ensures Rails generates a single string key, and changing any component forces expiration of only that variant."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},65404:(e,n,a)=>{a.d(n,{R:()=>r,x:()=>s});var c=a(36672);const i={},t=c.createContext(i);function r(e){const n=c.useContext(t);return c.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),c.createElement(t.Provider,{value:n},e.children)}}}]);