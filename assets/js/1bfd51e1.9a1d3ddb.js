"use strict";(self.webpackChunkkeep_being_human_dev=self.webpackChunkkeep_being_human_dev||[]).push([[77180],{65404:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>t});var i=o(36672);const c={},d=i.createContext(c);function s(e){const n=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:s(e.components),i.createElement(d.Provider,{value:n},e.children)}},72470:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>r,contentTitle:()=>t,default:()=>l,frontMatter:()=>s,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"gems/geocoder/middle/customizing_geocoder_config","title":"customizing_geocoder_config","description":"\u2699\ufe0f Customizing Geocoder Configuration and Caching","source":"@site/docs/gems/geocoder/middle/customizing_geocoder_config.md","sourceDirName":"gems/geocoder/middle","slug":"/gems/geocoder/middle/customizing_geocoder_config","permalink":"/keep-being-human-dev/docs/gems/geocoder/middle/customizing_geocoder_config","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/gems/geocoder/middle/customizing_geocoder_config.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"postgis_advanced_queries","permalink":"/keep-being-human-dev/docs/gems/geocoder/expert/postgis_advanced_queries"},"next":{"title":"distance_queries_near_scope","permalink":"/keep-being-human-dev/docs/gems/geocoder/middle/distance_queries_near_scope"}}');var c=o(23420),d=o(65404);const s={},t=void 0,r={},a=[{value:"\u2699\ufe0f Customizing Geocoder Configuration and Caching",id:"\ufe0f-customizing-geocoder-configuration-and-caching",level:2}];function g(e){const n={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,d.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.h2,{id:"\ufe0f-customizing-geocoder-configuration-and-caching",children:"\u2699\ufe0f Customizing Geocoder Configuration and Caching"}),"\n",(0,c.jsx)(n.p,{children:"Tweaking Geocoder\u2019s global settings helps optimize performance and control accuracy. You can change default units, timeout, and enable result caching."}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["Create or update ",(0,c.jsx)(n.code,{children:"config/initializers/geocoder.rb"}),":"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-ruby",children:"Geocoder.configure(\n  # Use kilometers instead of miles\n  units: :km,\n  # Limit network requests to one per second\n  lookup: :google,\n  api_key: ENV['GOOGLE_GEOCODER_API_KEY'],\n  timeout: 5,\n  # Store geocoding results in Redis to avoid repeated API calls\n  cache: Geocoder::Store::Redis.new,\n  cache_prefix: 'geocoder:'\n)\n"})}),"\n",(0,c.jsxs)(n.ol,{start:"2",children:["\n",(0,c.jsx)(n.li,{children:"Re\u2011geocode only when needed to reduce API usage:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-ruby",children:"class Place < ApplicationRecord\n  geocoded_by :full_address\n  after_validation :geocode, if: :address_needs_geocoding?\n\n  def address_needs_geocoding?\n    address.present? && (latitude.blank? || address_changed?)\n  end\nend\n"})}),"\n",(0,c.jsx)(n.p,{children:"With caching enabled and selective geocoding, you\u2019ll minimize external requests and speed up lookup."})]})}function l(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(g,{...e})}):g(e)}}}]);