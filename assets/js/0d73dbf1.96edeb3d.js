"use strict";(self.webpackChunkkeep_being_human_dev=self.webpackChunkkeep_being_human_dev||[]).push([[87208],{15485:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"gems/ransack/middle/ransack_association_search","title":"ransack_association_search","description":"\ud83d\udd17 Searching Through Associations with Ransack","source":"@site/docs/gems/ransack/middle/ransack_association_search.md","sourceDirName":"gems/ransack/middle","slug":"/gems/ransack/middle/ransack_association_search","permalink":"/keep-being-human-dev/docs/gems/ransack/middle/ransack_association_search","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/gems/ransack/middle/ransack_association_search.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"postgres_full_text_search_predicate","permalink":"/keep-being-human-dev/docs/gems/ransack/expert/postgres_full_text_search_predicate"},"next":{"title":"ransack_group_or_conditions","permalink":"/keep-being-human-dev/docs/gems/ransack/middle/ransack_group_or_conditions"}}');var r=n(23420),t=n(65404);const i={},c=void 0,o={},d=[{value:"\ud83d\udd17 Searching Through Associations with Ransack",id:"-searching-through-associations-with-ransack",level:2}];function l(e){const s={code:"code",h2:"h2",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h2,{id:"-searching-through-associations-with-ransack",children:"\ud83d\udd17 Searching Through Associations with Ransack"}),"\n",(0,r.jsx)(s.p,{children:"Ransack makes it easy to search across associated models by leveraging nested predicates. You can target fields on related records by joining association names and attribute names with underscores. This lets you build forms that filter parent records by attributes stored in associated tables."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-erb",children:'<%= search_form_for @q do |f| %>\n  <div>\n    <%= f.label :profile_age_eq, "Age" %>\n    <%= f.number_field :profile_age_eq %>\n  </div>\n  <div>\n    <%= f.label :profile_city_cont, "City contains" %>\n    <%= f.text_field :profile_city_cont %>\n  </div>\n  <%= f.submit "Search" %>\n<% end %>\n'})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ruby",children:"# In controller\n@q = User.ransack(params[:q])\n@users = @q.result.includes(:profile)\n"})}),"\n",(0,r.jsxs)(s.p,{children:["By including the ",(0,r.jsx)(s.code,{children:":profile"})," association, you avoid N+1 queries when filtering by ",(0,r.jsx)(s.code,{children:"profile_age_eq"})," or ",(0,r.jsx)(s.code,{children:"profile_city_cont"}),"."]})]})}function u(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},65404:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>c});var a=n(36672);const r={},t=a.createContext(r);function i(e){const s=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(t.Provider,{value:s},e.children)}}}]);