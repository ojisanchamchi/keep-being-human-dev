"use strict";(self.webpackChunkkeep_being_human_dev=self.webpackChunkkeep_being_human_dev||[]).push([[60243],{61967:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"rails/logging/expert/instrument_performance_with_notifications","title":"instrument_performance_with_notifications","description":"\ud83d\udcca Utilize ActiveSupport::Notifications for Performance Instrumentation","source":"@site/docs/rails/logging/expert/instrument_performance_with_notifications.md","sourceDirName":"rails/logging/expert","slug":"/rails/logging/expert/instrument_performance_with_notifications","permalink":"/keep-being-human-dev/docs/rails/logging/expert/instrument_performance_with_notifications","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/rails/logging/expert/instrument_performance_with_notifications.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"implement_correlation_id_tracing","permalink":"/keep-being-human-dev/docs/rails/logging/expert/implement_correlation_id_tracing"},"next":{"title":"structure_json_logs_semantic","permalink":"/keep-being-human-dev/docs/rails/logging/expert/structure_json_logs_semantic"}}');var r=n(23420),o=n(65404);const a={},s=void 0,c={},u=[{value:"\ud83d\udcca Utilize ActiveSupport::Notifications for Performance Instrumentation",id:"-utilize-activesupportnotifications-for-performance-instrumentation",level:2}];function l(e){const t={code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"-utilize-activesupportnotifications-for-performance-instrumentation",children:"\ud83d\udcca Utilize ActiveSupport::Notifications for Performance Instrumentation"}),"\n",(0,r.jsx)(t.p,{children:"Instrument critical blocks or methods to capture custom metrics like service calls, cache hits, or algorithm timing. Subscribe to these notifications in initializers to aggregate or forward metrics to monitoring tools."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ruby",children:"# config/initializers/performance_subscriber.rb\nActiveSupport::Notifications.subscribe('fetch_user_data.my_app') do |*args|\n  event = ActiveSupport::Notifications::Event.new(*args)\n  Rails.logger.debug(\"fetch_user_data\", duration: event.duration.round(1), payload: event.payload)\n  StatsD.histogram('fetch_user_data.duration', event.duration)\nend\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ruby",children:"# in code where you fetch data\ndef fetch_user_data(user)\n  ActiveSupport::Notifications.instrument('fetch_user_data.my_app', user_id: user.id) do\n    ExternalApi.get_data(user)\n  end\nend\n"})})]})}function p(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},65404:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>s});var i=n(36672);const r={},o=i.createContext(r);function a(e){const t=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);