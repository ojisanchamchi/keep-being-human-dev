"use strict";(self.webpackChunkkeep_being_human_dev=self.webpackChunkkeep_being_human_dev||[]).push([[29242],{65404:(e,s,o)=>{o.d(s,{R:()=>n,x:()=>r});var t=o(36672);const l={},a=t.createContext(l);function n(e){const s=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:n(e.components),t.createElement(a.Provider,{value:s},e.children)}},90208:(e,s,o)=>{o.r(s),o.d(s,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>n,metadata:()=>t,toc:()=>i});const t=JSON.parse('{"id":"rails/deployment/middle/local_asset_precompile","title":"local_asset_precompile","description":"\u2699\ufe0f Local Asset Precompilation for Faster Deploys","source":"@site/docs/rails/deployment/middle/local_asset_precompile.md","sourceDirName":"rails/deployment/middle","slug":"/rails/deployment/middle/local_asset_precompile","permalink":"/keep-being-human-dev/docs/rails/deployment/middle/local_asset_precompile","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/rails/deployment/middle/local_asset_precompile.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"capistrano_custom_tasks","permalink":"/keep-being-human-dev/docs/rails/deployment/middle/capistrano_custom_tasks"},"next":{"title":"production_credentials_usage","permalink":"/keep-being-human-dev/docs/rails/deployment/middle/production_credentials_usage"}}');var l=o(23420),a=o(65404);const n={},r=void 0,c={},i=[{value:"\u2699\ufe0f Local Asset Precompilation for Faster Deploys",id:"\ufe0f-local-asset-precompilation-for-faster-deploys",level:2}];function d(e){const s={code:"code",h2:"h2",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.h2,{id:"\ufe0f-local-asset-precompilation-for-faster-deploys",children:"\u2699\ufe0f Local Asset Precompilation for Faster Deploys"}),"\n",(0,l.jsxs)(s.p,{children:["Precompiling assets on your local machine can drastically reduce deploy times and server load. By generating the compiled files locally and uploading them, you avoid spending precious seconds on each web server. Add a custom task in ",(0,l.jsx)(s.code,{children:"config/deploy.rb"})," to run the ",(0,l.jsx)(s.code,{children:"assets:precompile"})," rake task locally and sync the output to your release."]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-ruby",children:"# config/deploy.rb\nnamespace :deploy do\n  desc 'Precompile assets locally and upload to servers'\n  task :compile_assets_locally do\n    run_locally { execute 'RAILS_ENV=production bundle exec rake assets:precompile' }\n    on roles(:web) do\n      upload!('public/assets/', \"#{release_path}/public/assets/\", recursive: true)\n    end\n    run_locally { execute 'rm -rf public/assets' }\n  end\n  before :updated, 'deploy:compile_assets_locally'\nend\n"})})]})}function p(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}}}]);