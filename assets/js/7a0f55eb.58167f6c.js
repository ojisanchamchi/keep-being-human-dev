"use strict";(self.webpackChunkkeep_being_human_dev=self.webpackChunkkeep_being_human_dev||[]).push([[73114],{65404:(e,s,r)=>{r.d(s,{R:()=>o,x:()=>t});var n=r(36672);const a={},i=n.createContext(a);function o(e){const s=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),n.createElement(i.Provider,{value:s},e.children)}},80623:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>o,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"rails/background_jobs/middle/serialize_arguments_safely","title":"serialize_arguments_safely","description":"\ud83d\udcdd Serialize Active Record Models Safely","source":"@site/docs/rails/background_jobs/middle/serialize_arguments_safely.md","sourceDirName":"rails/background_jobs/middle","slug":"/rails/background_jobs/middle/serialize_arguments_safely","permalink":"/keep-being-human-dev/docs/rails/background_jobs/middle/serialize_arguments_safely","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/rails/background_jobs/middle/serialize_arguments_safely.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"schedule_jobs_with_active_job","permalink":"/keep-being-human-dev/docs/rails/background_jobs/middle/schedule_jobs_with_active_job"},"next":{"title":"test_background_jobs_in_rspec","permalink":"/keep-being-human-dev/docs/rails/background_jobs/middle/test_background_jobs_in_rspec"}}');var a=r(23420),i=r(65404);const o={},t=void 0,d={},c=[{value:"\ud83d\udcdd Serialize Active Record Models Safely",id:"-serialize-active-record-models-safely",level:2}];function l(e){const s={code:"code",h2:"h2",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.h2,{id:"-serialize-active-record-models-safely",children:"\ud83d\udcdd Serialize Active Record Models Safely"}),"\n",(0,a.jsx)(s.p,{children:"Passing whole Active Record objects to jobs can lead to stale data or serialization errors. Instead, pass record IDs or Global IDs and reload them inside the job to ensure you operate on fresh data."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-ruby",children:"# Enqueue with id\nUserNotificationJob.perform_later(current_user.id)\n"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-ruby",children:"# app/jobs/user_notification_job.rb\nclass UserNotificationJob < ApplicationJob\n  queue_as :notifications\n\n  def perform(user_id)\n    user = User.find_by(id: user_id)\n    return unless user\n    user.send_welcome_email\n  end\nend\n"})})]})}function u(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}}}]);