"use strict";(self.webpackChunkkeep_being_human_dev=self.webpackChunkkeep_being_human_dev||[]).push([[20423],{65404:(e,a,n)=>{n.d(a,{R:()=>i,x:()=>o});var s=n(36672);const t={},l=s.createContext(t);function i(e){const a=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(l.Provider,{value:a},e.children)}},70685:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>r,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"ruby/yaml/advanced/secure_yaml_safe_load","title":"secure_yaml_safe_load","description":"\ud83d\udd10 Secure Safe Loading with Custom Classes and Aliases","source":"@site/docs/ruby/yaml/advanced/secure_yaml_safe_load.md","sourceDirName":"ruby/yaml/advanced","slug":"/ruby/yaml/advanced/secure_yaml_safe_load","permalink":"/keep-being-human-dev/docs/ruby/yaml/advanced/secure_yaml_safe_load","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/ruby/yaml/advanced/secure_yaml_safe_load.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"custom_yaml_serialization","permalink":"/keep-being-human-dev/docs/ruby/yaml/advanced/custom_yaml_serialization"},"next":{"title":"streaming_yaml_parsing","permalink":"/keep-being-human-dev/docs/ruby/yaml/advanced/streaming_yaml_parsing"}}');var t=n(23420),l=n(65404);const i={},o=void 0,r={},c=[{value:"\ud83d\udd10 Secure Safe Loading with Custom Classes and Aliases",id:"-secure-safe-loading-with-custom-classes-and-aliases",level:2}];function d(e){const a={code:"code",h2:"h2",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.h2,{id:"-secure-safe-loading-with-custom-classes-and-aliases",children:"\ud83d\udd10 Secure Safe Loading with Custom Classes and Aliases"}),"\n",(0,t.jsxs)(a.p,{children:["Use ",(0,t.jsx)(a.code,{children:"YAML.safe_load"})," with explicit whitelisting of classes, symbols, and alias support to prevent code injection while still deserializing complex types. This approach only allows known classes and symbols, and you can enable or disable alias resolution as needed."]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-ruby",children:'require \'yaml\'\nrequire \'date\'\n\nclass Event\n  attr_accessor :title, :date\n  def initialize(title, date)\n    @title = title\n    @date  = date\n  end\nend\n\nyaml_string = <<~YAML\n  ---\n  !ruby/object:Event\n    title: "Launch"\n    date: 2024-12-01\n  # uses &anchor and *alias below\n  details: &info\n    location: "HQ"\n  followup:\n    <<: *info\nYAML\n\nsafe = YAML.safe_load(\n  yaml_string,\n  permitted_classes: [Date, Event],\n  permitted_symbols: [:location],\n  aliases: true,\n  symbolize_names: true\n)\n\nputs safe.inspect\n# => {:title=>"Launch", :date=>#<Date: 2024-12-01 ...>, :details=>{:location=>"HQ"}, :followup=>{:location=>"HQ"}}\n'})})]})}function u(e={}){const{wrapper:a}={...(0,l.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);