"use strict";(self.webpackChunkkeep_being_human_dev=self.webpackChunkkeep_being_human_dev||[]).push([[50566],{57985:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>p});const i=JSON.parse('{"id":"javascript/hotwire/expert/turbo_optimistic_ui","title":"turbo_optimistic_ui","description":"\u26a1\ufe0f Implement Optimistic UI Updates in Turbo Frames","source":"@site/docs/javascript/hotwire/expert/turbo_optimistic_ui.md","sourceDirName":"javascript/hotwire/expert","slug":"/javascript/hotwire/expert/turbo_optimistic_ui","permalink":"/keep-being-human-dev/docs/javascript/hotwire/expert/turbo_optimistic_ui","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/javascript/hotwire/expert/turbo_optimistic_ui.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"turbo_native_mobile","permalink":"/keep-being-human-dev/docs/javascript/hotwire/expert/turbo_native_mobile"},"next":{"title":"turbo_stream_batch_updates","permalink":"/keep-being-human-dev/docs/javascript/hotwire/expert/turbo_stream_batch_updates"}}');var n=r(23420),s=r(65404);const o={},a=void 0,c={},p=[{value:"\u26a1\ufe0f Implement Optimistic UI Updates in Turbo Frames",id:"\ufe0f-implement-optimistic-ui-updates-in-turbo-frames",level:2}];function u(e){const t={code:"code",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"\ufe0f-implement-optimistic-ui-updates-in-turbo-frames",children:"\u26a1\ufe0f Implement Optimistic UI Updates in Turbo Frames"}),"\n",(0,n.jsx)(t.p,{children:"Intercept form submissions in a custom Stimulus controller to speculatively render a loading state before the server response arrives. If the request succeeds, replace the frame content; on failure, revert back to the original HTML."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:'import { Controller } from "@hotwired/stimulus";\n\nexport default class extends Controller {\n  static targets = ["form", "frame"];\n\n  async submit(event) {\n    event.preventDefault();\n    const originalHTML = this.frameTarget.innerHTML;\n    this.frameTarget.innerHTML = \'<div class="loading">Saving...</div>\';\n\n    const response = await fetch(this.formTarget.action, {\n      method: this.formTarget.method,\n      body: new FormData(this.formTarget)\n    });\n\n    if (response.ok) {\n      const html = await response.text();\n      this.frameTarget.outerHTML = html;\n    } else {\n      this.frameTarget.innerHTML = originalHTML;\n    }\n  }\n}\n'})})]})}function m(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}},65404:(e,t,r)=>{r.d(t,{R:()=>o,x:()=>a});var i=r(36672);const n={},s=i.createContext(n);function o(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);