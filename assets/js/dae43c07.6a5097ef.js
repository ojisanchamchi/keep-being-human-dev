"use strict";(self.webpackChunkkeep_being_human_dev=self.webpackChunkkeep_being_human_dev||[]).push([[76352],{65404:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>s});var t=r(36672);const i={},o=t.createContext(i);function c(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),t.createElement(o.Provider,{value:n},e.children)}},83446:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>l,frontMatter:()=>c,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"rails/active_record_querying/expert/window_functions","title":"window_functions","description":"\u26a1 Implement Window Functions for Complex Analytics","source":"@site/docs/rails/active_record_querying/expert/window_functions.md","sourceDirName":"rails/active_record_querying/expert","slug":"/rails/active_record_querying/expert/window_functions","permalink":"/keep-being-human-dev/docs/rails/active_record_querying/expert/window_functions","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/rails/active_record_querying/expert/window_functions.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"recursive_cte_for_hierarchies","permalink":"/keep-being-human-dev/docs/rails/active_record_querying/expert/recursive_cte_for_hierarchies"},"next":{"title":"batch_processing","permalink":"/keep-being-human-dev/docs/rails/active_record_querying/middle/batch_processing"}}');var i=r(23420),o=r(65404);const c={},s=void 0,a={},d=[{value:"\u26a1 Implement Window Functions for Complex Analytics",id:"-implement-window-functions-for-complex-analytics",level:2}];function u(e){const n={code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"-implement-window-functions-for-complex-analytics",children:"\u26a1 Implement Window Functions for Complex Analytics"}),"\n",(0,i.jsxs)(n.p,{children:["Window functions like ",(0,i.jsx)(n.code,{children:"ROW_NUMBER()"}),", ",(0,i.jsx)(n.code,{children:"RANK()"}),", and ",(0,i.jsx)(n.code,{children:"LEAD()"})," can be used via raw SQL fragments in ActiveRecord to perform advanced analytics without pulling data into Ruby. These queries let you rank, compute running totals, or compare rows within partitions."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ruby",children:"users = User.select(\n  'users.*',\n  'RANK() OVER (PARTITION BY country ORDER BY score DESC) AS country_rank'\n)\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You can then filter or sort by ",(0,i.jsx)(n.code,{children:"country_rank"})," in Ruby or SQL, which is perfect for multi-tenant leaderboards or trend analysis."]})]})}function l(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}}}]);