"use strict";(self.webpackChunkkeep_being_human_dev=self.webpackChunkkeep_being_human_dev||[]).push([[76380],{65404:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>i});var a=t(36672);const r={},s=a.createContext(r);function o(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),a.createElement(s.Provider,{value:n},e.children)}},73230:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>a,toc:()=>p});const a=JSON.parse('{"id":"rails/deployment/expert/canary_deployments_k8s_flagger","title":"canary_deployments_k8s_flagger","description":"\u2699\ufe0f Canary Deployments with Flagger on Kubernetes","source":"@site/docs/rails/deployment/expert/canary_deployments_k8s_flagger.md","sourceDirName":"rails/deployment/expert","slug":"/rails/deployment/expert/canary_deployments_k8s_flagger","permalink":"/keep-being-human-dev/docs/rails/deployment/expert/canary_deployments_k8s_flagger","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/rails/deployment/expert/canary_deployments_k8s_flagger.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"dockerize_rails_app","permalink":"/keep-being-human-dev/docs/rails/deployment/beginner/dockerize_rails_app"},"next":{"title":"docker_cache_optimization","permalink":"/keep-being-human-dev/docs/rails/deployment/expert/docker_cache_optimization"}}');var r=t(23420),s=t(65404);const o={},i=void 0,l={},p=[{value:"\u2699\ufe0f Canary Deployments with Flagger on Kubernetes",id:"\ufe0f-canary-deployments-with-flagger-on-kubernetes",level:2}];function c(e){const n={code:"code",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"\ufe0f-canary-deployments-with-flagger-on-kubernetes",children:"\u2699\ufe0f Canary Deployments with Flagger on Kubernetes"}),"\n",(0,r.jsx)(n.p,{children:"Implement progressive rollouts by using Flagger with Istio/Contour to shift traffic gradually between old and new versions. Configure health checks, alert thresholds, and automation hooks to ensure rollback on anomalies. This approach reduces blast radius and lets you test in production with real user traffic."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: flagger.app/v1beta1\nkind: Canary\nmetadata:\n  name: rails-app\n  namespace: production\nspec:\n  targetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: rails-app\n  progressDeadlineSeconds: 60\n  service:\n    port: 80\n    targetPort: 3000\n  analysis:\n    interval: 30s\n    threshold: 10\n    maxWeight: 50\n    stepWeight: 10\n    metrics:\n    - name: request-success-rate\n      threshold: 99\n      interval: 1m\n"})})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);