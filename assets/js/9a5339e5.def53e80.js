"use strict";(self.webpackChunkkeep_being_human_dev=self.webpackChunkkeep_being_human_dev||[]).push([[13187],{65404:(e,r,t)=>{t.d(r,{R:()=>s,x:()=>c});var n=t(36672);const a={},i=n.createContext(a);function s(e){const r=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),n.createElement(i.Provider,{value:r},e.children)}},73820:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>s,metadata:()=>n,toc:()=>p});const n=JSON.parse('{"id":"rails/active_record_querying/expert/prepared_statements","title":"prepared_statements","description":"\ud83d\ude80 Leverage Prepared Statements for Repeated Queries","source":"@site/docs/rails/active_record_querying/expert/prepared_statements.md","sourceDirName":"rails/active_record_querying/expert","slug":"/rails/active_record_querying/expert/prepared_statements","permalink":"/keep-being-human-dev/docs/rails/active_record_querying/expert/prepared_statements","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/rails/active_record_querying/expert/prepared_statements.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"optimistic_locking_queries","permalink":"/keep-being-human-dev/docs/rails/active_record_querying/expert/optimistic_locking_queries"},"next":{"title":"recursive_cte_for_hierarchies","permalink":"/keep-being-human-dev/docs/rails/active_record_querying/expert/recursive_cte_for_hierarchies"}}');var a=t(23420),i=t(65404);const s={},c=void 0,o={},p=[{value:"\ud83d\ude80 Leverage Prepared Statements for Repeated Queries",id:"-leverage-prepared-statements-for-repeated-queries",level:2}];function d(e){const r={code:"code",h2:"h2",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.h2,{id:"-leverage-prepared-statements-for-repeated-queries",children:"\ud83d\ude80 Leverage Prepared Statements for Repeated Queries"}),"\n",(0,a.jsxs)(r.p,{children:["Rails automatically caches prepared statements, but you can manually manage them for highly repetitive queries to shave off planning time. Use ",(0,a.jsx)(r.code,{children:"connection.prepare"})," and ",(0,a.jsx)(r.code,{children:"connection.exec_prepared"})," when you need fine-grained control over statement reuse and parameter binding."]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-ruby",children:"conn = ActiveRecord::Base.connection.raw_connection\nconn.prepare('find_user_by_email', 'SELECT * FROM users WHERE email = $1')\nresult = conn.exec_prepared('find_user_by_email', ['bob@example.com'])\n"})}),"\n",(0,a.jsx)(r.p,{children:"This low-level approach reduces round-trip overhead and can significantly speed up tight loops of similar queries."})]})}function u(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);