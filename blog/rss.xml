<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="rss.xsl"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>My Site Blog</title>
        <link>https://ojisanchamchi.github.io/keep-being-human-dev/blog/</link>
        <description>My Site Blog</description>
        <lastBuildDate>Thu, 24 Jul 2025 03:14:55 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[HÆ°á»›ng Dáº«n ToÃ n Diá»‡n Vá» Benchmark Trong Ruby - Tá»« CÆ¡ Báº£n Äáº¿n ChuyÃªn SÃ¢u]]></title>
            <link>https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/</link>
            <guid>https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/</guid>
            <pubDate>Thu, 24 Jul 2025 03:14:55 GMT</pubDate>
            <description><![CDATA[Tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t lÃ  má»™t khÃ­a cáº¡nh quan trá»ng trong phÃ¡t triá»ƒn Ruby, cho dÃ¹ báº¡n Ä‘ang xÃ¢y dá»±ng á»©ng dá»¥ng web, há»‡ thá»‘ng xá»­ lÃ½ dá»¯ liá»‡u, hay cÃ´ng cá»¥ dÃ²ng lá»‡nh. HÆ°á»›ng dáº«n toÃ n diá»‡n nÃ y sáº½ giÃºp báº¡n khÃ¡m phÃ¡ cÃ¡c kháº£ nÄƒng benchmark cá»§a Ruby, tá»« Ä‘o lÆ°á»ng thá»i gian cÆ¡ báº£n Ä‘áº¿n cÃ¡c ká»¹ thuáº­t phÃ¢n tÃ­ch chuyÃªn sÃ¢u. Äáº¿n cuá»‘i bÃ i, báº¡n sáº½ cÃ³ má»™t bá»™ cÃ´ng cá»¥ Ä‘áº§y Ä‘á»§ Ä‘á»ƒ Ä‘o lÆ°á»ng, so sÃ¡nh vÃ  tá»‘i Æ°u hÃ³a mÃ£ Ruby cá»§a mÃ¬nh.]]></description>
            <content:encoded><![CDATA[<p>Tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t lÃ  má»™t khÃ­a cáº¡nh quan trá»ng trong phÃ¡t triá»ƒn Ruby, cho dÃ¹ báº¡n Ä‘ang xÃ¢y dá»±ng á»©ng dá»¥ng web, há»‡ thá»‘ng xá»­ lÃ½ dá»¯ liá»‡u, hay cÃ´ng cá»¥ dÃ²ng lá»‡nh. HÆ°á»›ng dáº«n toÃ n diá»‡n nÃ y sáº½ giÃºp báº¡n khÃ¡m phÃ¡ cÃ¡c kháº£ nÄƒng benchmark cá»§a Ruby, tá»« Ä‘o lÆ°á»ng thá»i gian cÆ¡ báº£n Ä‘áº¿n cÃ¡c ká»¹ thuáº­t phÃ¢n tÃ­ch chuyÃªn sÃ¢u. Äáº¿n cuá»‘i bÃ i, báº¡n sáº½ cÃ³ má»™t bá»™ cÃ´ng cá»¥ Ä‘áº§y Ä‘á»§ Ä‘á»ƒ Ä‘o lÆ°á»ng, so sÃ¡nh vÃ  tá»‘i Æ°u hÃ³a mÃ£ Ruby cá»§a mÃ¬nh.</p>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="cáº¥p-Ä‘á»™-cÆ¡-báº£n-báº¯t-Ä‘áº§u-vá»›i-ruby-benchmarking">Cáº¥p Äá»™ CÆ¡ Báº£n: Báº¯t Äáº§u Vá»›i Ruby Benchmarking<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#c%E1%BA%A5p-%C4%91%E1%BB%99-c%C6%A1-b%E1%BA%A3n-b%E1%BA%AFt-%C4%91%E1%BA%A7u-v%E1%BB%9Bi-ruby-benchmarking" class="hash-link" aria-label="Direct link to Cáº¥p Äá»™ CÆ¡ Báº£n: Báº¯t Äáº§u Vá»›i Ruby Benchmarking" title="Direct link to Cáº¥p Äá»™ CÆ¡ Báº£n: Báº¯t Äáº§u Vá»›i Ruby Benchmarking">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="-kiá»ƒm-tra-hiá»‡u-suáº¥t-nhanh-trong-irb-hoáº·c-rails-console">âš¡ Kiá»ƒm Tra Hiá»‡u Suáº¥t Nhanh Trong IRB hoáº·c Rails Console<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#-ki%E1%BB%83m-tra-hi%E1%BB%87u-su%E1%BA%A5t-nhanh-trong-irb-ho%E1%BA%B7c-rails-console" class="hash-link" aria-label="Direct link to âš¡ Kiá»ƒm Tra Hiá»‡u Suáº¥t Nhanh Trong IRB hoáº·c Rails Console" title="Direct link to âš¡ Kiá»ƒm Tra Hiá»‡u Suáº¥t Nhanh Trong IRB hoáº·c Rails Console">â€‹</a></h3>
<p>CÃ¡ch Ä‘Æ¡n giáº£n nháº¥t Ä‘á»ƒ báº¯t Ä‘áº§u benchmark lÃ  trá»±c tiáº¿p trong mÃ´i trÆ°á»ng Ruby tÆ°Æ¡ng tÃ¡c. ThÆ° viá»‡n chuáº©n cá»§a Ruby bao gá»“m module <code>Benchmark</code>, cung cáº¥p nhiá»u phÆ°Æ¡ng thá»©c Ä‘á»ƒ Ä‘o thá»i gian thá»±c thi mÃ£.</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token plain">$ irb</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'benchmark'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;&gt;</span><span class="token plain"> Benchmark</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">measure </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">1.</span><span class="token number" style="color:rgb(181, 206, 168)">.100</span><span class="token plain">_000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">map</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token symbol">:to_s</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain">   </span><span class="token number" style="color:rgb(181, 206, 168)">0.020000</span><span class="token plain">   </span><span class="token number" style="color:rgb(181, 206, 168)">0.000000</span><span class="token plain">   </span><span class="token number" style="color:rgb(181, 206, 168)">0.020000</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">  </span><span class="token number" style="color:rgb(181, 206, 168)">0.019845</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre></div></div>
<p>Káº¿t quáº£ nÃ y hiá»ƒn thá»‹ thá»i gian CPU ngÆ°á»i dÃ¹ng, thá»i gian CPU há»‡ thá»‘ng, tá»•ng thá»i gian CPU vÃ  thá»i gian thá»±c táº¿ trÃ´i qua (trong ngoáº·c Ä‘Æ¡n).</p>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="-sá»­-dá»¥ng-benchmarkmeasure-Ä‘á»ƒ-Ä‘o-thá»i-gian-nhanh">ğŸ•’ Sá»­ Dá»¥ng Benchmark.measure Äá»ƒ Äo Thá»i Gian Nhanh<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#-s%E1%BB%AD-d%E1%BB%A5ng-benchmarkmeasure-%C4%91%E1%BB%83-%C4%91o-th%E1%BB%9Di-gian-nhanh" class="hash-link" aria-label="Direct link to ğŸ•’ Sá»­ Dá»¥ng Benchmark.measure Äá»ƒ Äo Thá»i Gian Nhanh" title="Direct link to ğŸ•’ Sá»­ Dá»¥ng Benchmark.measure Äá»ƒ Äo Thá»i Gian Nhanh">â€‹</a></h3>
<p>Khi báº¡n muá»‘n Ä‘o thá»i gian cá»§a má»™t khá»‘i mÃ£ cá»¥ thá»ƒ trong script cá»§a mÃ¬nh, <code>Benchmark.measure</code> lÃ  phÆ°Æ¡ng thá»©c lÃ½ tÆ°á»Ÿng:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'benchmark'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">time </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> Benchmark</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">measure </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># mÃ£ cá»§a báº¡n á»Ÿ Ä‘Ã¢y</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token number" style="color:rgb(181, 206, 168)">100</span><span class="token plain">_000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">times </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">i</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">puts time  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt;   0.010000   0.000000   0.010000 (  0.009876)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="ï¸-Ä‘o-lÆ°á»ng-ruby-thuáº§n-tÃºy-vá»›i-benchmarkrealtime">â±ï¸ Äo LÆ°á»ng Ruby Thuáº§n TÃºy Vá»›i Benchmark.realtime<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#%EF%B8%8F-%C4%91o-l%C6%B0%E1%BB%9Dng-ruby-thu%E1%BA%A7n-t%C3%BAy-v%E1%BB%9Bi-benchmarkrealtime" class="hash-link" aria-label="Direct link to â±ï¸ Äo LÆ°á»ng Ruby Thuáº§n TÃºy Vá»›i Benchmark.realtime" title="Direct link to â±ï¸ Äo LÆ°á»ng Ruby Thuáº§n TÃºy Vá»›i Benchmark.realtime">â€‹</a></h3>
<p>Náº¿u báº¡n chá»‰ quan tÃ¢m Ä‘áº¿n thá»i gian thá»±c táº¿ (thá»i gian thá»±c sá»± máº¥t Ä‘á»ƒ thá»±c hiá»‡n má»™t tÃ¡c vá»¥), <code>Benchmark.realtime</code> cung cáº¥p giao diá»‡n Ä‘Æ¡n giáº£n hÆ¡n:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'benchmark'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">elapsed </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> Benchmark</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">realtime </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  sleep </span><span class="token number" style="color:rgb(181, 206, 168)">0.5</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># thay tháº¿ báº±ng logic cá»§a báº¡n</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">puts </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Thá»i gian Ä‘Ã£ trÃ´i qua: </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">elapsed</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token string-literal interpolation content">round</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal interpolation content number" style="color:rgb(181, 206, 168)">3</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)"> giÃ¢y"</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="-so-sÃ¡nh-nhiá»u-Ä‘oáº¡n-mÃ£-vá»›i-benchmarkbm">ğŸ“Š So SÃ¡nh Nhiá»u Äoáº¡n MÃ£ Vá»›i Benchmark.bm<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#-so-s%C3%A1nh-nhi%E1%BB%81u-%C4%91o%E1%BA%A1n-m%C3%A3-v%E1%BB%9Bi-benchmarkbm" class="hash-link" aria-label="Direct link to ğŸ“Š So SÃ¡nh Nhiá»u Äoáº¡n MÃ£ Vá»›i Benchmark.bm" title="Direct link to ğŸ“Š So SÃ¡nh Nhiá»u Äoáº¡n MÃ£ Vá»›i Benchmark.bm">â€‹</a></h3>
<p>Khi báº¡n cáº§n so sÃ¡nh cÃ¡c cÃ¡ch triá»ƒn khai khÃ¡c nhau, <code>Benchmark.bm</code> táº¡o ra má»™t báº£ng Ä‘á»‹nh dáº¡ng:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'benchmark'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Benchmark</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">bm</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">12</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">x</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"vÃ²ng láº·p times"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">_000_000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">times </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">i</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"vÃ²ng láº·p for  "</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> i </span><span class="token keyword" style="color:rgb(86, 156, 214)">in</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1.</span><span class="token number" style="color:rgb(181, 206, 168)">.1</span><span class="token plain">_000_000</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      i </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><br></span></code></pre></div></div>
<p>Tham sá»‘ <code>12</code> chá»‰ Ä‘á»‹nh Ä‘á»™ rá»™ng cá»§a cá»™t nhÃ£n Ä‘á»ƒ cÄƒn chá»‰nh.</p>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="-truy-cáº­p-thá»i-gian-thá»±c-ngÆ°á»i-dÃ¹ng-vÃ -há»‡-thá»‘ng-tá»«-tms">ğŸ’¾ Truy Cáº­p Thá»i Gian Thá»±c, NgÆ°á»i DÃ¹ng vÃ  Há»‡ Thá»‘ng tá»« Tms<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#-truy-c%E1%BA%ADp-th%E1%BB%9Di-gian-th%E1%BB%B1c-ng%C6%B0%E1%BB%9Di-d%C3%B9ng-v%C3%A0-h%E1%BB%87-th%E1%BB%91ng-t%E1%BB%AB-tms" class="hash-link" aria-label="Direct link to ğŸ’¾ Truy Cáº­p Thá»i Gian Thá»±c, NgÆ°á»i DÃ¹ng vÃ  Há»‡ Thá»‘ng tá»« Tms" title="Direct link to ğŸ’¾ Truy Cáº­p Thá»i Gian Thá»±c, NgÆ°á»i DÃ¹ng vÃ  Há»‡ Thá»‘ng tá»« Tms">â€‹</a></h3>
<p>PhÆ°Æ¡ng thá»©c <code>Benchmark.measure</code> tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng <code>Benchmark::Tms</code> vá»›i cÃ¡c thuá»™c tÃ­nh thá»i gian riÃªng biá»‡t:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'benchmark'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">t </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> Benchmark</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">measure </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token plain">_000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">times </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> Math</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">sqrt</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">123.456</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">puts </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Thá»±c: </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">t</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token string-literal interpolation content">real</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># thá»i gian thá»±c táº¿</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">puts </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"NgÆ°á»i dÃ¹ng: </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">t</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token string-literal interpolation content">utime</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token plain">   </span><span class="token comment" style="color:rgb(106, 153, 85)"># thá»i gian CPU dÃ nh cho Ruby</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">puts </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Há»‡ thá»‘ng: </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">t</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token string-literal interpolation content">stime</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># thá»i gian CPU dÃ nh cho lá»‡nh gá»i há»‡ thá»‘ng</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="cáº¥p-Ä‘á»™-trung-cáº¥p-Ä‘o-lÆ°á»ng-chÃ­nh-xÃ¡c-hÆ¡n">Cáº¥p Äá»™ Trung Cáº¥p: Äo LÆ°á»ng ChÃ­nh XÃ¡c HÆ¡n<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#c%E1%BA%A5p-%C4%91%E1%BB%99-trung-c%E1%BA%A5p-%C4%91o-l%C6%B0%E1%BB%9Dng-ch%C3%ADnh-x%C3%A1c-h%C6%A1n" class="hash-link" aria-label="Direct link to Cáº¥p Äá»™ Trung Cáº¥p: Äo LÆ°á»ng ChÃ­nh XÃ¡c HÆ¡n" title="Direct link to Cáº¥p Äá»™ Trung Cáº¥p: Äo LÆ°á»ng ChÃ­nh XÃ¡c HÆ¡n">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="-sá»­-dá»¥ng-benchmarkbm-cho-cÃ¡c-phÃ©p-Ä‘o-chi-tiáº¿t">ğŸš€ Sá»­ Dá»¥ng Benchmark.bm Cho CÃ¡c PhÃ©p Äo Chi Tiáº¿t<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#-s%E1%BB%AD-d%E1%BB%A5ng-benchmarkbm-cho-c%C3%A1c-ph%C3%A9p-%C4%91o-chi-ti%E1%BA%BFt" class="hash-link" aria-label="Direct link to ğŸš€ Sá»­ Dá»¥ng Benchmark.bm Cho CÃ¡c PhÃ©p Äo Chi Tiáº¿t" title="Direct link to ğŸš€ Sá»­ Dá»¥ng Benchmark.bm Cho CÃ¡c PhÃ©p Äo Chi Tiáº¿t">â€‹</a></h3>
<p>Äá»ƒ so sÃ¡nh chi tiáº¿t hÆ¡n, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng <code>Benchmark.bm</code> vá»›i nhiá»u khá»‘i mÃ£:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'benchmark'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">n </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">500</span><span class="token plain">_000</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Benchmark</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">bm</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">x</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'each'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">1.</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">each</span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">i</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> Math</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">sqrt</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'map'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">     </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">1.</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">map     </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">i</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> Math</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">sqrt</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'collect'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">1.</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">collect </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">i</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> Math</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">sqrt</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="-táº­n-dá»¥ng-benchmarkbmbm-cho-so-sÃ¡nh-chÃ­nh-xÃ¡c">ğŸ§ª Táº­n Dá»¥ng Benchmark.bmbm Cho So SÃ¡nh ChÃ­nh XÃ¡c<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#-t%E1%BA%ADn-d%E1%BB%A5ng-benchmarkbmbm-cho-so-s%C3%A1nh-ch%C3%ADnh-x%C3%A1c" class="hash-link" aria-label="Direct link to ğŸ§ª Táº­n Dá»¥ng Benchmark.bmbm Cho So SÃ¡nh ChÃ­nh XÃ¡c" title="Direct link to ğŸ§ª Táº­n Dá»¥ng Benchmark.bmbm Cho So SÃ¡nh ChÃ­nh XÃ¡c">â€‹</a></h3>
<p>PhÆ°Æ¡ng thá»©c <code>bmbm</code> (viáº¿t táº¯t cá»§a "benchmark benchmark") cháº¡y má»—i khá»‘i hai láº§nâ€”Ä‘áº§u tiÃªn lÃ  "táº­p dÆ°á»£t" vÃ  sau Ä‘Ã³ lÃ  Ä‘o lÆ°á»ng thá»±c táº¿. Äiá»u nÃ y giÃºp loáº¡i bá» cÃ¡c báº¥t thÆ°á»ng trong láº§n cháº¡y Ä‘áº§u tiÃªn nhÆ° JIT warm-up hoáº·c overhead cá»§a garbage collection:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'benchmark'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Benchmark</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">bmbm</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">12</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">x</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'ná»‘i chuá»—i +'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">     </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">100</span><span class="token plain">_000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">times </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'a'</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'b'</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'ná»™i suy chuá»—i'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">100</span><span class="token plain">_000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">times </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">a</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">b</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="ï¸-sá»­-dá»¥ng-benchmarkrealtime-cho-Ä‘o-thá»i-gian-nhanh">â±ï¸ Sá»­ Dá»¥ng Benchmark.realtime Cho Äo Thá»i Gian Nhanh<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#%EF%B8%8F-s%E1%BB%AD-d%E1%BB%A5ng-benchmarkrealtime-cho-%C4%91o-th%E1%BB%9Di-gian-nhanh" class="hash-link" aria-label="Direct link to â±ï¸ Sá»­ Dá»¥ng Benchmark.realtime Cho Äo Thá»i Gian Nhanh" title="Direct link to â±ï¸ Sá»­ Dá»¥ng Benchmark.realtime Cho Äo Thá»i Gian Nhanh">â€‹</a></h3>
<p>Äá»‘i vá»›i cÃ¡c phÃ©p Ä‘o nhanh, <code>Benchmark.realtime</code> lÃ  lá»±a chá»n hoÃ n háº£o:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'benchmark'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">start_time </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> Benchmark</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">realtime </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  sleep</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">puts </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Thao tÃ¡c máº¥t </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">start_time</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token string-literal interpolation content">round</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal interpolation content number" style="color:rgb(181, 206, 168)">3</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">s"</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="-ghi-láº¡i-vÃ -Ä‘á»‹nh-dáº¡ng-káº¿t-quáº£-benchmark">ğŸ“Š Ghi Láº¡i vÃ  Äá»‹nh Dáº¡ng Káº¿t Quáº£ Benchmark<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#-ghi-l%E1%BA%A1i-v%C3%A0-%C4%91%E1%BB%8Bnh-d%E1%BA%A1ng-k%E1%BA%BFt-qu%E1%BA%A3-benchmark" class="hash-link" aria-label="Direct link to ğŸ“Š Ghi Láº¡i vÃ  Äá»‹nh Dáº¡ng Káº¿t Quáº£ Benchmark" title="Direct link to ğŸ“Š Ghi Láº¡i vÃ  Äá»‹nh Dáº¡ng Káº¿t Quáº£ Benchmark">â€‹</a></h3>
<p>Báº¡n cÃ³ thá»ƒ ghi láº¡i káº¿t quáº£ benchmark vÃ  Ä‘á»‹nh dáº¡ng chÃºng theo chÆ°Æ¡ng trÃ¬nh:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'benchmark'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">result </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> Benchmark</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">measure </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">_000_000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">times </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">i</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(212, 212, 212)">**</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">puts </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Thá»±c: </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">result</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token string-literal interpolation content">real</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token string-literal interpolation content">round</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal interpolation content number" style="color:rgb(181, 206, 168)">4</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">s, NgÆ°á»i dÃ¹ng: </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">result</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token string-literal interpolation content">utime</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token string-literal interpolation content">round</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal interpolation content number" style="color:rgb(181, 206, 168)">4</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">s, Há»‡ thá»‘ng: </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">result</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token string-literal interpolation content">stime</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token string-literal interpolation content">round</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal interpolation content number" style="color:rgb(181, 206, 168)">4</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">s"</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="ï¸-so-sÃ¡nh-ná»‘i-chuá»—i-vÃ -ná»™i-suy-chuá»—i">âœ‚ï¸ So SÃ¡nh Ná»‘i Chuá»—i vÃ  Ná»™i Suy Chuá»—i<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#%EF%B8%8F-so-s%C3%A1nh-n%E1%BB%91i-chu%E1%BB%97i-v%C3%A0-n%E1%BB%99i-suy-chu%E1%BB%97i" class="hash-link" aria-label="Direct link to âœ‚ï¸ So SÃ¡nh Ná»‘i Chuá»—i vÃ  Ná»™i Suy Chuá»—i" title="Direct link to âœ‚ï¸ So SÃ¡nh Ná»‘i Chuá»—i vÃ  Ná»™i Suy Chuá»—i">â€‹</a></h3>
<p>Má»™t vÃ­ dá»¥ thá»±c táº¿ vá» benchmark cÃ¡c cÃ¡ch tiáº¿p cáº­n khÃ¡c nhau:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'benchmark'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">n </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">200</span><span class="token plain">_000</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Benchmark</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">bm</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">15</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">x</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'ná»‘i chuá»—i'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">times </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> s </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'foo'</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'bar'</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'ná»™i suy chuá»—i'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">times </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> s </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content string-literal string" style="color:rgb(206, 145, 120)">'foo'</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content string-literal string" style="color:rgb(206, 145, 120)">'bar'</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="cáº¥p-Ä‘á»™-nÃ¢ng-cao-ká»¹-thuáº­t-benchmark-chuyÃªn-biá»‡t">Cáº¥p Äá»™ NÃ¢ng Cao: Ká»¹ Thuáº­t Benchmark ChuyÃªn Biá»‡t<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#c%E1%BA%A5p-%C4%91%E1%BB%99-n%C3%A2ng-cao-k%E1%BB%B9-thu%E1%BA%ADt-benchmark-chuy%C3%AAn-bi%E1%BB%87t" class="hash-link" aria-label="Direct link to Cáº¥p Äá»™ NÃ¢ng Cao: Ká»¹ Thuáº­t Benchmark ChuyÃªn Biá»‡t" title="Direct link to Cáº¥p Äá»™ NÃ¢ng Cao: Ká»¹ Thuáº­t Benchmark ChuyÃªn Biá»‡t">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="-sá»­-dá»¥ng-benchmark-ips-cho-cÃ¡c-sá»‘-liá»‡u-thÃ´ng-lÆ°á»£ng">âš¡ Sá»­ Dá»¥ng <code>benchmark-ips</code> Cho CÃ¡c Sá»‘ Liá»‡u ThÃ´ng LÆ°á»£ng<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#-s%E1%BB%AD-d%E1%BB%A5ng-benchmark-ips-cho-c%C3%A1c-s%E1%BB%91-li%E1%BB%87u-th%C3%B4ng-l%C6%B0%E1%BB%A3ng" class="hash-link" aria-label="Direct link to -sá»­-dá»¥ng-benchmark-ips-cho-cÃ¡c-sá»‘-liá»‡u-thÃ´ng-lÆ°á»£ng" title="Direct link to -sá»­-dá»¥ng-benchmark-ips-cho-cÃ¡c-sá»‘-liá»‡u-thÃ´ng-lÆ°á»£ng">â€‹</a></h3>
<p>Gem <code>benchmark-ips</code> Ä‘o lÆ°á»ng sá»‘ láº§n láº·p má»—i giÃ¢y, thÆ°á»ng há»¯u Ã­ch hÆ¡n thá»i gian thÃ´ khi so sÃ¡nh cÃ¡c thuáº­t toÃ¡n:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'benchmark/ips'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Benchmark</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">ips </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">x</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'ná»‘i chuá»—i'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">   </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'hello'</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">' '</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'world'</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'ná»™i suy chuá»—i'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content string-literal string" style="color:rgb(206, 145, 120)">'hello'</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)"> </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content string-literal string" style="color:rgb(206, 145, 120)">'world'</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">compare</span><span class="token operator" style="color:rgb(212, 212, 212)">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><br></span></code></pre></div></div>
<p>PhÆ°Æ¡ng thá»©c <code>compare!</code> tá»± Ä‘á»™ng tÃ­nh toÃ¡n má»™t cÃ¡ch triá»ƒn khai nhanh hÆ¡n bao nhiÃªu so vá»›i cÃ¡c cÃ¡ch khÃ¡c.</p>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="-má»Ÿ-rá»™ng-benchmarksuite-vá»›i-cÃ¡c-sá»‘-liá»‡u-tÃ¹y-chá»‰nh">ğŸ”§ Má»Ÿ Rá»™ng <code>Benchmark::Suite</code> Vá»›i CÃ¡c Sá»‘ Liá»‡u TÃ¹y Chá»‰nh<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#-m%E1%BB%9F-r%E1%BB%99ng-benchmarksuite-v%E1%BB%9Bi-c%C3%A1c-s%E1%BB%91-li%E1%BB%87u-t%C3%B9y-ch%E1%BB%89nh" class="hash-link" aria-label="Direct link to -má»Ÿ-rá»™ng-benchmarksuite-vá»›i-cÃ¡c-sá»‘-liá»‡u-tÃ¹y-chá»‰nh" title="Direct link to -má»Ÿ-rá»™ng-benchmarksuite-vá»›i-cÃ¡c-sá»‘-liá»‡u-tÃ¹y-chá»‰nh">â€‹</a></h3>
<p>Äá»‘i vá»›i phÃ¢n tÃ­ch Ä‘a chiá»u, báº¡n cÃ³ thá»ƒ táº¡o cÃ¡c bá»™ benchmark tÃ¹y chá»‰nh:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'benchmark/suite'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">CustomSuite</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain"> Benchmark</span><span class="token double-colon punctuation" style="color:rgb(212, 212, 212)">::</span><span class="token plain">Suite</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  report </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'allocations'</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">n</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token constant" style="color:rgb(100, 102, 149)">GC</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">start</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> before </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">GC</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">stat</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token symbol">:total_allocated_objects</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    n</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">times </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">rand</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token constant" style="color:rgb(100, 102, 149)">GC</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">stat</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token symbol">:total_allocated_objects</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> before</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">suite </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">CustomSuite</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">suite</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">bench_ms</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token plain">_000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">suite</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token symbol">:legacy</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="-táº¡m-thá»i-vÃ´-hiá»‡u-hÃ³a-garbage-collection-trong-benchmark">ğŸš« Táº¡m Thá»i VÃ´ Hiá»‡u HÃ³a Garbage Collection Trong Benchmark<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#-t%E1%BA%A1m-th%E1%BB%9Di-v%C3%B4-hi%E1%BB%87u-h%C3%B3a-garbage-collection-trong-benchmark" class="hash-link" aria-label="Direct link to ğŸš« Táº¡m Thá»i VÃ´ Hiá»‡u HÃ³a Garbage Collection Trong Benchmark" title="Direct link to ğŸš« Táº¡m Thá»i VÃ´ Hiá»‡u HÃ³a Garbage Collection Trong Benchmark">â€‹</a></h3>
<p>Garbage collection cÃ³ thá»ƒ lÃ m sai lá»‡ch káº¿t quáº£ microbenchmark. Báº¡n cÃ³ thá»ƒ táº¡m thá»i vÃ´ hiá»‡u hÃ³a nÃ³:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'benchmark'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token constant" style="color:rgb(100, 102, 149)">GC</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">disable</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">results </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> Benchmark</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">measure </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token plain">_000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">times </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"foo"</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token constant" style="color:rgb(100, 102, 149)">GC</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">enable</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">puts results</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="-káº¿t-há»£p-cÃ¡c-sá»‘-liá»‡u-phÃ¢n-bá»•-bá»™-nhá»›-vÃ o-benchmark">ğŸ“Š Káº¿t Há»£p CÃ¡c Sá»‘ Liá»‡u PhÃ¢n Bá»• Bá»™ Nhá»› VÃ o Benchmark<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#-k%E1%BA%BFt-h%E1%BB%A3p-c%C3%A1c-s%E1%BB%91-li%E1%BB%87u-ph%C3%A2n-b%E1%BB%95-b%E1%BB%99-nh%E1%BB%9B-v%C3%A0o-benchmark" class="hash-link" aria-label="Direct link to ğŸ“Š Káº¿t Há»£p CÃ¡c Sá»‘ Liá»‡u PhÃ¢n Bá»• Bá»™ Nhá»› VÃ o Benchmark" title="Direct link to ğŸ“Š Káº¿t Há»£p CÃ¡c Sá»‘ Liá»‡u PhÃ¢n Bá»• Bá»™ Nhá»› VÃ o Benchmark">â€‹</a></h3>
<p>Viá»‡c sá»­ dá»¥ng bá»™ nhá»› thÆ°á»ng quan trá»ng nhÆ° thá»i gian thá»±c thi:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'benchmark'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'memory_profiler'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">report </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> MemoryProfiler</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token plain">_000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">times </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> rand </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">pretty_print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token symbol">to_file</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'allocations.txt'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="-triá»ƒn-khai-giai-Ä‘oáº¡n-khá»Ÿi-Ä‘á»™ng-Ä‘á»ƒ-á»•n-Ä‘á»‹nh-jit-vÃ -hiá»‡u-á»©ng-bá»™-nhá»›-Ä‘á»‡m">ğŸ”¥ Triá»ƒn Khai Giai Äoáº¡n Khá»Ÿi Äá»™ng Äá»ƒ á»”n Äá»‹nh JIT vÃ  Hiá»‡u á»¨ng Bá»™ Nhá»› Äá»‡m<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#-tri%E1%BB%83n-khai-giai-%C4%91o%E1%BA%A1n-kh%E1%BB%9Fi-%C4%91%E1%BB%99ng-%C4%91%E1%BB%83-%E1%BB%95n-%C4%91%E1%BB%8Bnh-jit-v%C3%A0-hi%E1%BB%87u-%E1%BB%A9ng-b%E1%BB%99-nh%E1%BB%9B-%C4%91%E1%BB%87m" class="hash-link" aria-label="Direct link to ğŸ”¥ Triá»ƒn Khai Giai Äoáº¡n Khá»Ÿi Äá»™ng Äá»ƒ á»”n Äá»‹nh JIT vÃ  Hiá»‡u á»¨ng Bá»™ Nhá»› Äá»‡m" title="Direct link to ğŸ”¥ Triá»ƒn Khai Giai Äoáº¡n Khá»Ÿi Äá»™ng Äá»ƒ á»”n Äá»‹nh JIT vÃ  Hiá»‡u á»¨ng Bá»™ Nhá»› Äá»‡m">â€‹</a></h3>
<p>Giai Ä‘oáº¡n khá»Ÿi Ä‘á»™ng giÃºp á»•n Ä‘á»‹nh cÃ¡c phÃ©p Ä‘o báº±ng cÃ¡ch cho phÃ©p VM cá»§a Ruby tá»‘i Æ°u hÃ³a Ä‘Æ°á»ng dáº«n mÃ£:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'benchmark/ips'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Benchmark</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">ips</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token symbol">warmup</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">time</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">x</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'math sqrt'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> Math</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">sqrt</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">123.456</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'pow operator'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">123.456</span><span class="token operator" style="color:rgb(212, 212, 212)">**</span><span class="token number" style="color:rgb(181, 206, 168)">0.5</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="cáº¥p-Ä‘á»™-chuyÃªn-gia-benchmark-cáº¥p-Ä‘á»™-sáº£n-xuáº¥t">Cáº¥p Äá»™ ChuyÃªn Gia: Benchmark Cáº¥p Äá»™ Sáº£n Xuáº¥t<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#c%E1%BA%A5p-%C4%91%E1%BB%99-chuy%C3%AAn-gia-benchmark-c%E1%BA%A5p-%C4%91%E1%BB%99-s%E1%BA%A3n-xu%E1%BA%A5t" class="hash-link" aria-label="Direct link to Cáº¥p Äá»™ ChuyÃªn Gia: Benchmark Cáº¥p Äá»™ Sáº£n Xuáº¥t" title="Direct link to Cáº¥p Äá»™ ChuyÃªn Gia: Benchmark Cáº¥p Äá»™ Sáº£n Xuáº¥t">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="-tá»±-Ä‘á»™ng-hÃ³a-bá»™-benchmark-vá»›i-bÃ¡o-cÃ¡o-html-tÆ°Æ¡ng-tÃ¡c">ğŸ›  Tá»± Äá»™ng HÃ³a Bá»™ Benchmark Vá»›i BÃ¡o CÃ¡o HTML TÆ°Æ¡ng TÃ¡c<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#-t%E1%BB%B1-%C4%91%E1%BB%99ng-h%C3%B3a-b%E1%BB%99-benchmark-v%E1%BB%9Bi-b%C3%A1o-c%C3%A1o-html-t%C6%B0%C6%A1ng-t%C3%A1c" class="hash-link" aria-label="Direct link to ğŸ›  Tá»± Äá»™ng HÃ³a Bá»™ Benchmark Vá»›i BÃ¡o CÃ¡o HTML TÆ°Æ¡ng TÃ¡c" title="Direct link to ğŸ›  Tá»± Äá»™ng HÃ³a Bá»™ Benchmark Vá»›i BÃ¡o CÃ¡o HTML TÆ°Æ¡ng TÃ¡c">â€‹</a></h3>
<p>Äá»ƒ giÃ¡m sÃ¡t hiá»‡u suáº¥t liÃªn tá»¥c, tÃ­ch há»£p benchmark vÃ o pipeline CI cá»§a báº¡n:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'benchmark'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'erb'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'json'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># BÆ°á»›c 1: cháº¡y benchmark</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">results </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> Benchmark</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">bmbm </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">x</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'alpha'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> alpha_task </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'beta'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> beta_task  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># BÆ°á»›c 2: chuáº©n bá»‹ dá»¯ liá»‡u cho biá»ƒu Ä‘á»“</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">chart_data </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> results</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">map </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">r</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token symbol">name</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> r</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">label</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">time</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> r</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">real </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># BÆ°á»›c 3: render HTML</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">template </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">ERB</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token builtin" style="color:rgb(86, 156, 214)">File</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">read</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'report_template.html.erb'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token builtin" style="color:rgb(86, 156, 214)">File</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">write</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'bench_report.html'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> template</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">result_with_hash</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token symbol">data</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> chart_data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_json</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre></div></div>
<p>Sau Ä‘Ã³, trong pipeline GitHub Actions cá»§a báº¡n, táº£i lÃªn <code>bench_report.html</code> nhÆ° má»™t artifact hoáº·c triá»ƒn khai lÃªn GitHub Pages Ä‘á»ƒ cÃ³ kháº£ nÄƒng hiá»ƒn thá»‹ liÃªn tá»¥c.</p>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="-tinh-chá»‰nh-benchmarkips-cho-Ä‘á»™-tin-cáº­y-thá»‘ng-kÃª">ğŸš€ Tinh Chá»‰nh Benchmark.ips Cho Äá»™ Tin Cáº­y Thá»‘ng KÃª<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#-tinh-ch%E1%BB%89nh-benchmarkips-cho-%C4%91%E1%BB%99-tin-c%E1%BA%ADy-th%E1%BB%91ng-k%C3%AA" class="hash-link" aria-label="Direct link to ğŸš€ Tinh Chá»‰nh Benchmark.ips Cho Äá»™ Tin Cáº­y Thá»‘ng KÃª" title="Direct link to ğŸš€ Tinh Chá»‰nh Benchmark.ips Cho Äá»™ Tin Cáº­y Thá»‘ng KÃª">â€‹</a></h3>
<p>Äá»‘i vá»›i cÃ¡c há»‡ thá»‘ng quan trá»ng, Ä‘á»™ tin cáº­y thá»‘ng kÃª lÃ  ráº¥t quan trá»ng:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'benchmark/ips'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Benchmark</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">ips </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">x</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token symbol">time</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">warmup</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">confidence</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">95</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">guarantee</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">99</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"fast_path"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># triá»ƒn khai Ä‘Ã£ tá»‘i Æ°u hÃ³a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    FastPath</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">process</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"fallback"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># triá»ƒn khai dá»± phÃ²ng cháº­m hÆ¡n</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    Fallback</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">process</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">compare</span><span class="token operator" style="color:rgb(212, 212, 212)">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="-microbenchmark-c-extensions-so-vá»›i-ruby-thuáº§n-tÃºy">ğŸ”© Microbenchmark C Extensions So Vá»›i Ruby Thuáº§n TÃºy<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#-microbenchmark-c-extensions-so-v%E1%BB%9Bi-ruby-thu%E1%BA%A7n-t%C3%BAy" class="hash-link" aria-label="Direct link to ğŸ”© Microbenchmark C Extensions So Vá»›i Ruby Thuáº§n TÃºy" title="Direct link to ğŸ”© Microbenchmark C Extensions So Vá»›i Ruby Thuáº§n TÃºy">â€‹</a></h3>
<p>Khi xem xÃ©t C extensions cho mÃ£ quan trá»ng vá» hiá»‡u suáº¥t:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'benchmark/ips'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">require_relative </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'fast_parser'</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># C extension</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">ruby_parser</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">each_char</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">map</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token symbol">:ord</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">reduce</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">^</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Benchmark</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">ips </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">x</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token symbol">time</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">warmup</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"C parser"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> FastParser</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">parse</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">large_string</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Ruby parser"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">   </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> ruby_parser</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">large_string</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">compare</span><span class="token operator" style="color:rgb(212, 212, 212)">!</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token symbol">threshold</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1.05</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># chá»‰ hiá»ƒn thá»‹ sá»± khÃ¡c biá»‡t &gt;5%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="ï¸-xÃ¢y-dá»±ng-bá»™-benchmark-tÃ¹y-chá»‰nh-vá»›i-khá»Ÿi-Ä‘á»™ng-vÃ -dá»n-dáº¹p">âš™ï¸ XÃ¢y Dá»±ng Bá»™ Benchmark TÃ¹y Chá»‰nh Vá»›i Khá»Ÿi Äá»™ng vÃ  Dá»n Dáº¹p<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#%EF%B8%8F-x%C3%A2y-d%E1%BB%B1ng-b%E1%BB%99-benchmark-t%C3%B9y-ch%E1%BB%89nh-v%E1%BB%9Bi-kh%E1%BB%9Fi-%C4%91%E1%BB%99ng-v%C3%A0-d%E1%BB%8Dn-d%E1%BA%B9p" class="hash-link" aria-label="Direct link to âš™ï¸ XÃ¢y Dá»±ng Bá»™ Benchmark TÃ¹y Chá»‰nh Vá»›i Khá»Ÿi Äá»™ng vÃ  Dá»n Dáº¹p" title="Direct link to âš™ï¸ XÃ¢y Dá»±ng Bá»™ Benchmark TÃ¹y Chá»‰nh Vá»›i Khá»Ÿi Äá»™ng vÃ  Dá»n Dáº¹p">â€‹</a></h3>
<p>Äá»‘i vá»›i benchmark cáº¥p doanh nghiá»‡p, má»™t bá»™ tÃ¹y chá»‰nh cung cáº¥p kháº£ nÄƒng kiá»ƒm soÃ¡t tá»‘i Ä‘a:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">BenchmarkHarness</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">initialize</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token symbol">iterations</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">warmup_cycles</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token variable" style="color:rgb(156, 220, 254)">@iterations</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> iterations</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token variable" style="color:rgb(156, 220, 254)">@warmup_cycles</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> warmup_cycles</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token variable" style="color:rgb(156, 220, 254)">@results</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">run</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token variable" style="color:rgb(156, 220, 254)">@warmup_cycles</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">times </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token constant" style="color:rgb(100, 102, 149)">GC</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">start </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token variable" style="color:rgb(156, 220, 254)">@warmup_cycles</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">times </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">yield</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># khá»Ÿi Ä‘á»™ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token variable" style="color:rgb(156, 220, 254)">@iterations</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">times </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">i</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token constant" style="color:rgb(100, 102, 149)">GC</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">start</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token symbol">full_mark</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">immediate_sweep</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      t0 </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> Process</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">clock_gettime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">Process</span><span class="token double-colon punctuation" style="color:rgb(212, 212, 212)">::</span><span class="token constant" style="color:rgb(100, 102, 149)">CLOCK_MONOTONIC</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">yield</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      t1 </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> Process</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">clock_gettime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">Process</span><span class="token double-colon punctuation" style="color:rgb(212, 212, 212)">::</span><span class="token constant" style="color:rgb(100, 102, 149)">CLOCK_MONOTONIC</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token variable" style="color:rgb(156, 220, 254)">@results</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">t1 </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> t0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    summarize</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">summarize</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    avg </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token variable" style="color:rgb(156, 220, 254)">@results</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">sum </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token variable" style="color:rgb(156, 220, 254)">@results</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">size</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    sd </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> Math</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">sqrt</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token variable" style="color:rgb(156, 220, 254)">@results</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">map </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">x</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">x </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> avg</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token operator" style="color:rgb(212, 212, 212)">**</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">sum </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token variable" style="color:rgb(156, 220, 254)">@results</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">size</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token symbol">average</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> avg</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">std_dev</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> sd</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">samples</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(156, 220, 254)">@results</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">size </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># CÃ¡ch sá»­ dá»¥ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">harness </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">BenchmarkHarness</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token symbol">iterations</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">50</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">warmup_cycles</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">stats </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> harness</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">run </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> MyService</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">call</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">payload</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">puts stats</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_aa2m" id="-káº¿t-há»£p-phÃ¢n-tÃ­ch-hiá»‡u-suáº¥t-vÃ -bá»™-nhá»›-sá»­-dá»¥ng-memory_profiler">ğŸ“Š Káº¿t Há»£p PhÃ¢n TÃ­ch Hiá»‡u Suáº¥t vÃ  Bá»™ Nhá»› Sá»­ Dá»¥ng memory_profiler<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#-k%E1%BA%BFt-h%E1%BB%A3p-ph%C3%A2n-t%C3%ADch-hi%E1%BB%87u-su%E1%BA%A5t-v%C3%A0-b%E1%BB%99-nh%E1%BB%9B-s%E1%BB%AD-d%E1%BB%A5ng-memory_profiler" class="hash-link" aria-label="Direct link to ğŸ“Š Káº¿t Há»£p PhÃ¢n TÃ­ch Hiá»‡u Suáº¥t vÃ  Bá»™ Nhá»› Sá»­ Dá»¥ng memory_profiler" title="Direct link to ğŸ“Š Káº¿t Há»£p PhÃ¢n TÃ­ch Hiá»‡u Suáº¥t vÃ  Bá»™ Nhá»› Sá»­ Dá»¥ng memory_profiler">â€‹</a></h3>
<p>Äá»ƒ cÃ³ cÃ¡i nhÃ¬n toÃ n diá»‡n vá» hiá»‡u suáº¥t, káº¿t há»£p phÃ¢n tÃ­ch thá»i gian vÃ  bá»™ nhá»›:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'benchmark'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'memory_profiler'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">report </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> MemoryProfiler</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">report </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  time </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> Benchmark</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">realtime </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token plain">_000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">times </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> process_item</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">item</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  puts </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Thá»i gian thá»±c thi: </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">time</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token string-literal interpolation content">round</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal interpolation content number" style="color:rgb(181, 206, 168)">4</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">s"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">report</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">pretty_print</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token symbol">to_file</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'memory_report.txt'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="káº¿t-luáº­n">Káº¿t Luáº­n<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/huong-dan-benchmark-ruby/#k%E1%BA%BFt-lu%E1%BA%ADn" class="hash-link" aria-label="Direct link to Káº¿t Luáº­n" title="Direct link to Káº¿t Luáº­n">â€‹</a></h2>
<p>Benchmark trong Ruby lÃ  má»™t hÃ nh trÃ¬nh tá»« cÃ¡c phÃ©p Ä‘o thá»i gian Ä‘Æ¡n giáº£n Ä‘áº¿n phÃ¢n tÃ­ch thá»‘ng kÃª phá»©c táº¡p. Khi á»©ng dá»¥ng cá»§a báº¡n ngÃ y cÃ ng phá»©c táº¡p, ká»¹ thuáº­t benchmark cá»§a báº¡n cÅ©ng nÃªn phÃ¡t triá»ƒn theo. Báº¯t Ä‘áº§u vá»›i cÃ¡c cÆ¡ báº£n nhÆ° <code>Benchmark.measure</code> vÃ  <code>Benchmark.bm</code>, sau Ä‘Ã³ tiáº¿n tá»›i cÃ¡c cÃ´ng cá»¥ nÃ¢ng cao hÆ¡n nhÆ° <code>benchmark-ips</code> vÃ  cÃ¡c bá»™ tÃ¹y chá»‰nh khi cáº§n thiáº¿t.</p>
<p>HÃ£y nhá»› ráº±ng benchmark khÃ´ng chá»‰ lÃ  tÃ¬m mÃ£ nhanh nháº¥tâ€”mÃ  lÃ  Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh sÃ¡ng suá»‘t dá»±a trÃªn dá»¯ liá»‡u thá»±c nghiá»‡m. ÄÃ´i khi má»™t triá»ƒn khai hÆ¡i cháº­m hÆ¡n cÃ³ thá»ƒ Ä‘Æ°á»£c Æ°a chuá»™ng náº¿u nÃ³ sá»­ dá»¥ng Ã­t bá»™ nhá»› hÆ¡n hoáº·c dá»… báº£o trÃ¬ hÆ¡n. LuÃ´n xem xÃ©t bá»‘i cáº£nh Ä‘áº§y Ä‘á»§ cá»§a á»©ng dá»¥ng khi tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t.</p>
<p>Báº±ng cÃ¡ch náº¯m vá»¯ng cÃ¡c ká»¹ thuáº­t benchmark nÃ y, báº¡n sáº½ Ä‘Æ°á»£c trang bá»‹ tá»‘t Ä‘á»ƒ viáº¿t mÃ£ Ruby hiá»‡u quáº£, cÃ³ hiá»‡u suáº¥t cao vÃ  cÃ³ thá»ƒ má»Ÿ rá»™ng theo nhu cáº§u cá»§a báº¡n.</p>]]></content:encoded>
            <category>Ruby</category>
            <category>Performance</category>
            <category>Benchmarking</category>
        </item>
        <item>
            <title><![CDATA[Nghá»‡ Thuáº­t Tá»‘i ThÆ°á»£ng vá» Máº£ng trong Ruby: BÃ­ KÃ­p Chá»‰ DÃ nh Cho ChuyÃªn Gia]]></title>
            <link>https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-chuyen-gia/</link>
            <guid>https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-chuyen-gia/</guid>
            <pubDate>Wed, 26 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Ruby Arrays Expert]]></description>
            <content:encoded><![CDATA[<p><img decoding="async" loading="lazy" src="https://images.unsplash.com/photo-1555099962-4199c345e5dd?ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1350&amp;q=80" alt="Ruby Arrays Expert" class="img_VBoq"></p>
<p>Báº¡n Ä‘Ã£ thÃ nh tháº¡o táº¥t cáº£ cÃ¡c ká»¹ thuáº­t cÆ¡ báº£n, trung cáº¥p vÃ  nÃ¢ng cao vá» máº£ng trong Ruby? ÄÃ£ Ä‘áº¿n lÃºc khÃ¡m phÃ¡ nhá»¯ng bÃ­ kÃ­p tá»‘i thÆ°á»£ng, nhá»¯ng ká»¹ thuáº­t chá»‰ dÃ nh cho cÃ¡c chuyÃªn gia Ruby thá»±c thá»¥. BÃ i viáº¿t nÃ y sáº½ Ä‘Æ°a báº¡n Ä‘áº¿n nhá»¯ng ranh giá»›i xa nháº¥t cá»§a viá»‡c lÃ m viá»‡c vá»›i máº£ng trong Ruby, nÆ¡i hiá»‡u suáº¥t, tÃ­nh linh hoáº¡t vÃ  sá»± thanh lá»‹ch cá»§a code Ä‘Æ°á»£c Ä‘áº©y Ä‘áº¿n giá»›i háº¡n.</p>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-xá»­-lÃ½-song-song-vá»›i-threads">ğŸ§µ Xá»­ LÃ½ Song Song vá»›i Threads<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-chuyen-gia/#-x%E1%BB%AD-l%C3%BD-song-song-v%E1%BB%9Bi-threads" class="hash-link" aria-label="Direct link to ğŸ§µ Xá»­ LÃ½ Song Song vá»›i Threads" title="Direct link to ğŸ§µ Xá»­ LÃ½ Song Song vá»›i Threads">â€‹</a></h2>
<p>Táº­n dá»¥ng sá»©c máº¡nh cá»§a Ä‘a luá»“ng Ä‘á»ƒ xá»­ lÃ½ máº£ng lá»›n má»™t cÃ¡ch hiá»‡u quáº£:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'thread'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'etc'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">parallel_map</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token symbol">pool_size</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Etc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">nprocessors</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> empty</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    queue   </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">SizedQueue</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">pool_size</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    results </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">size</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    mutex   </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Mutex</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># Táº¡o nhÃ³m worker threads</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    workers </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> pool_size</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">times</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">map </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token class-name" style="color:rgb(78, 201, 176)">Thread</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">while</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">item </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> queue</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">pop </span><span class="token keyword" style="color:rgb(86, 156, 214)">rescue</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">nil</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> idx </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> item</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          result </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">yield</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          mutex</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">synchronize </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> results</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">idx</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> result </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># ÄÆ°a cÃ´ng viá»‡c vÃ o hÃ ng Ä‘á»£i</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    each_with_index </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">elem</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> queue </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">elem</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># ÄÃ³ng hÃ ng Ä‘á»£i vÃ  chá» cÃ¡c worker hoÃ n thÃ nh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    pool_size</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">times </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> queue</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">close </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    workers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">each</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token symbol">:join</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    results</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># VÃ­ dá»¥ sá»­ dá»¥ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">xu_ly_phuc_tap</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  sleep</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">0.1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># Giáº£ láº­p xá»­ lÃ½ tá»‘n thá»i gian</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  n </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> n</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Xá»­ lÃ½ tuáº§n tá»± - máº¥t khoáº£ng 1 giÃ¢y</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">start </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(86, 156, 214)">Time</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">now</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">ket_qua_tuan_tu </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">6</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">9</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">map </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">n</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> xu_ly_phuc_tap</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">puts </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Xá»­ lÃ½ tuáº§n tá»±: </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content builtin" style="color:rgb(86, 156, 214)">Time</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token string-literal interpolation content">now </span><span class="token string-literal interpolation content operator" style="color:rgb(212, 212, 212)">-</span><span class="token string-literal interpolation content"> start</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)"> giÃ¢y"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Xá»­ lÃ½ song song - nhanh hÆ¡n nhiá»u</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">start </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(86, 156, 214)">Time</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">now</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">ket_qua_song_song </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">6</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">9</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">parallel_map </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">n</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> xu_ly_phuc_tap</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">puts </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Xá»­ lÃ½ song song: </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content builtin" style="color:rgb(86, 156, 214)">Time</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token string-literal interpolation content">now </span><span class="token string-literal interpolation content operator" style="color:rgb(212, 212, 212)">-</span><span class="token string-literal interpolation content"> start</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)"> giÃ¢y"</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-deep-freeze---báº£o-vá»‡-máº£ng-lá»“ng-nhau-khá»i-thay-Ä‘á»•i">ğŸ”’ Deep Freeze - Báº£o Vá»‡ Máº£ng Lá»“ng Nhau Khá»i Thay Äá»•i<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-chuyen-gia/#-deep-freeze---b%E1%BA%A3o-v%E1%BB%87-m%E1%BA%A3ng-l%E1%BB%93ng-nhau-kh%E1%BB%8Fi-thay-%C4%91%E1%BB%95i" class="hash-link" aria-label="Direct link to ğŸ”’ Deep Freeze - Báº£o Vá»‡ Máº£ng Lá»“ng Nhau Khá»i Thay Äá»•i" title="Direct link to ğŸ”’ Deep Freeze - Báº£o Vá»‡ Máº£ng Lá»“ng Nhau Khá»i Thay Äá»•i">â€‹</a></h2>
<p>Táº¡o máº£ng báº¥t biáº¿n hoÃ n toÃ n, bao gá»“m cáº£ cÃ¡c máº£ng con vÃ  Ä‘á»‘i tÆ°á»£ng bÃªn trong:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">deep_freeze</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">each</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">element</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> element</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">deep_freeze </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> element</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">respond_to</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token symbol">:deep_freeze</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    freeze</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Hash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">deep_freeze</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    each_value </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">value</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">deep_freeze </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">respond_to</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token symbol">:deep_freeze</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    freeze</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Object</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">deep_freeze</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    freeze</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Táº¡o cáº¥u trÃºc dá»¯ liá»‡u báº¥t biáº¿n hoÃ n toÃ n</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cau_hinh </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token symbol">app_name</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Ruby Master"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token symbol">version</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"1.0.0"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token symbol">settings</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token symbol">timeout</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">30</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token symbol">retries</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token symbol">endpoints</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"api.example.com"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"backup.example.com"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token symbol">features</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"authentication"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"reporting"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"analytics"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">deep_freeze</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Thá»­ thay Ä‘á»•i sáº½ gÃ¢y ra lá»—i</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># cau_hinh[:version] = "1.0.1"                  # =&gt; FrozenError</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># cau_hinh[:settings][:timeout] = 60            # =&gt; FrozenError</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># cau_hinh[:settings][:endpoints] &lt;&lt; "new.com"  # =&gt; FrozenError</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># cau_hinh[:features][0] = "new-auth"           # =&gt; FrozenError</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-metaprogramming---táº¡o-phÆ°Æ¡ng-thá»©c-máº£ng-Ä‘á»™ng">ğŸ§  Metaprogramming - Táº¡o PhÆ°Æ¡ng Thá»©c Máº£ng Äá»™ng<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-chuyen-gia/#-metaprogramming---t%E1%BA%A1o-ph%C6%B0%C6%A1ng-th%E1%BB%A9c-m%E1%BA%A3ng-%C4%91%E1%BB%99ng" class="hash-link" aria-label="Direct link to ğŸ§  Metaprogramming - Táº¡o PhÆ°Æ¡ng Thá»©c Máº£ng Äá»™ng" title="Direct link to ğŸ§  Metaprogramming - Táº¡o PhÆ°Æ¡ng Thá»©c Máº£ng Äá»™ng">â€‹</a></h2>
<p>Sá»­ dá»¥ng metaprogramming Ä‘á»ƒ táº¡o cÃ¡c phÆ°Æ¡ng thá»©c xá»­ lÃ½ máº£ng má»™t cÃ¡ch Ä‘á»™ng:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># Äá»‹nh nghÄ©a cÃ¡c phÆ°Æ¡ng thá»©c tÃ¬m kiáº¿m Ä‘á»™ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">%w[first last min max]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">each</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">method_prefix</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">%w[even odd prime]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">each</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">criteria</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      method_name </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">method_prefix</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">_</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">criteria</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">define_method</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">method_name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">case</span><span class="token plain"> criteria</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">when</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'even'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token keyword" style="color:rgb(86, 156, 214)">self</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">select</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token symbol">:even?</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">public_send</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">method_prefix</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">when</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'odd'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token keyword" style="color:rgb(86, 156, 214)">self</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">select</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token symbol">:odd?</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">public_send</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">method_prefix</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">when</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'prime'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'prime'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token keyword" style="color:rgb(86, 156, 214)">self</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">select </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">n</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> Prime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">prime</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">public_send</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">method_prefix</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># Táº¡o phÆ°Æ¡ng thá»©c tá»•ng há»£p Ä‘á»™ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">method_missing</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">method_name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token plain">block</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> method_name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_s </span><span class="token operator" style="color:rgb(212, 212, 212)">=~</span><span class="token plain"> </span><span class="token regex-literal regex">/^(sum|product)_of_(.+)$/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      operation</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> property </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> $</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> $</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      values </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> map </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">item</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">is_a</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token builtin" style="color:rgb(86, 156, 214)">Hash</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">property</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_sym</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">send</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">property</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">case</span><span class="token plain"> operation</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">when</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'sum'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        values</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">sum</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">when</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'product'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        values</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">inject</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">super</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">respond_to_missing</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">method_name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> include_private </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    method_name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_s </span><span class="token operator" style="color:rgb(212, 212, 212)">=~</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token operator" style="color:rgb(212, 212, 212)">^</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">sum</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">product</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">_of_</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">$</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">||</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">super</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c Ä‘Æ°á»£c táº¡o Ä‘á»™ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">so </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">6</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">9</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">11</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">12</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">13</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">so</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">first_even  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">so</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">last_odd    </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">so</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">max_prime   </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Sá»­ dá»¥ng vá»›i máº£ng Ä‘á»‘i tÆ°á»£ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">san_pham </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Laptop"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">gia</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">15000000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">so_luong</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Äiá»‡n thoáº¡i"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">gia</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8000000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">so_luong</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Tai nghe"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">gia</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1500000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">so_luong</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">san_pham</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">sum_of_gia       </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 24500000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">san_pham</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">product_of_so_luong  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 100</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-memoized-inject---tá»‘i-Æ°u-hÃ³a-tÃ­nh-toÃ¡n-láº·p-láº¡i">ğŸ§® Memoized Inject - Tá»‘i Æ¯u HÃ³a TÃ­nh ToÃ¡n Láº·p Láº¡i<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-chuyen-gia/#-memoized-inject---t%E1%BB%91i-%C6%B0u-h%C3%B3a-t%C3%ADnh-to%C3%A1n-l%E1%BA%B7p-l%E1%BA%A1i" class="hash-link" aria-label="Direct link to ğŸ§® Memoized Inject - Tá»‘i Æ¯u HÃ³a TÃ­nh ToÃ¡n Láº·p Láº¡i" title="Direct link to ğŸ§® Memoized Inject - Tá»‘i Æ¯u HÃ³a TÃ­nh ToÃ¡n Láº·p Láº¡i">â€‹</a></h2>
<p>Táº¡o má»™t phiÃªn báº£n tá»‘i Æ°u cá»§a <code>inject</code> vá»›i kháº£ nÄƒng ghi nhá»› káº¿t quáº£ trung gian:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">memoized_inject</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">initial </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">nil</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> memo_key </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">nil</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    memo </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    memo_key </span><span class="token operator" style="color:rgb(212, 212, 212)">||=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">acc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">acc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">hash </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> block_given</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      inject</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">initial</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">acc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> item</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        key </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> memo_key</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">call</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">acc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        memo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">||=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">yield</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">acc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      inject</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">initial</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># TÃ­nh giai thá»«a vá»›i memoization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">factorial</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> n </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">1.</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">memoized_inject</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">acc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> acc </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> i </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># TÃ­nh sá»‘ Fibonacci vá»›i memoization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">fibonacci_sequence</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> n </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> n </span><span class="token operator" style="color:rgb(212, 212, 212)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> n </span><span class="token operator" style="color:rgb(212, 212, 212)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  result </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  memo </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">2.</span><span class="token operator" style="color:rgb(212, 212, 212)">..</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">each</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">i</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    key </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">i</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">i</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">hash</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    memo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">||=</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">i</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">i</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    result </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> memo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  result</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">puts fibonacci_sequence</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">100</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">last  </span><span class="token comment" style="color:rgb(106, 153, 85)"># TÃ­nh sá»‘ Fibonacci thá»© 100 ráº¥t nhanh</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-enumerator-vÃ´-háº¡n-lÆ°á»i-biáº¿ng">ğŸ”„ Enumerator VÃ´ Háº¡n LÆ°á»i Biáº¿ng<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-chuyen-gia/#-enumerator-v%C3%B4-h%E1%BA%A1n-l%C6%B0%E1%BB%9Di-bi%E1%BA%BFng" class="hash-link" aria-label="Direct link to ğŸ”„ Enumerator VÃ´ Háº¡n LÆ°á»i Biáº¿ng" title="Direct link to ğŸ”„ Enumerator VÃ´ Háº¡n LÆ°á»i Biáº¿ng">â€‹</a></h2>
<p>Táº¡o vÃ  lÃ m viá»‡c vá»›i cÃ¡c dÃ£y vÃ´ háº¡n mÃ  khÃ´ng gÃ¢y trÃ n bá»™ nhá»›:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># Táº¡o dÃ£y sá»‘ Fibonacci vÃ´ háº¡n</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">fibonacci </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Enumerator</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">yielder</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  a</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> b </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  loop </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    yielder </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> a</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    a</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> b </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token plain"> b</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">lazy</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Láº¥y 10 sá»‘ Fibonacci Ä‘áº§u tiÃªn</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">fibonacci</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">take</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">force  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [0, 1, 1, 2, 3, 5, 8, 13, 21, 34]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Láº¥y cÃ¡c sá»‘ Fibonacci lá»›n hÆ¡n 1000 vÃ  nhá» hÆ¡n 10000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">fibonacci</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">select </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">n</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> n </span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1000</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">take_while </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">n</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> n </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">10000</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">force  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [1597, 2584, 4181, 6765]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Táº¡o dÃ£y sá»‘ nguyÃªn tá»‘ vÃ´ háº¡n</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'prime'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">primes </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Enumerator</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">yielder</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  Prime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">each</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">prime</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> yielder </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> prime </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">lazy</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># TÃ¬m 5 sá»‘ nguyÃªn tá»‘ Ä‘áº§u tiÃªn lá»›n hÆ¡n 1000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">primes</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">select </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">p</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> p </span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1000000</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">take</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">force  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [1000003, 1000033, 1000037, 1000039, 1000081]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-refinements---má»Ÿ-rá»™ng-máº£ng-an-toÃ n">ğŸ”Œ Refinements - Má»Ÿ Rá»™ng Máº£ng An ToÃ n<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-chuyen-gia/#-refinements---m%E1%BB%9F-r%E1%BB%99ng-m%E1%BA%A3ng-an-to%C3%A0n" class="hash-link" aria-label="Direct link to ğŸ”Œ Refinements - Má»Ÿ Rá»™ng Máº£ng An ToÃ n" title="Direct link to ğŸ”Œ Refinements - Má»Ÿ Rá»™ng Máº£ng An ToÃ n">â€‹</a></h2>
<p>Sá»­ dá»¥ng refinements Ä‘á»ƒ má»Ÿ rá»™ng chá»©c nÄƒng cá»§a máº£ng mÃ  khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n code khÃ¡c:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">module</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">ArrayExtensions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  refine </span><span class="token builtin" style="color:rgb(86, 156, 214)">Array</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># PhÆ°Æ¡ng thá»©c tÃ¬m pháº§n tá»­ phá»• biáº¿n nháº¥t</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">most_frequent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      group_by</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token symbol">:itself</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">transform_values</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token symbol">:count</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">max_by </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">_</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> count</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> count </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;.</span><span class="token plain">first</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># PhÆ°Æ¡ng thá»©c tÃ­nh trung bÃ¬nh cÃ³ trá»ng sá»‘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">weighted_average</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">weights </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">nil</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">nil</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> empty</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> weights</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">nil</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        sum</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_f </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> size</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">raise</span><span class="token plain"> ArgumentError</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Weights array must have same size as source array"</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> weights</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">size </span><span class="token operator" style="color:rgb(212, 212, 212)">!=</span><span class="token plain"> size</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        sum </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">v</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> v </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> weights</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">index</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_f </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> weights</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">sum</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># PhÆ°Æ¡ng thá»©c chia máº£ng thÃ nh cÃ¡c nhÃ³m cÃ³ kÃ­ch thÆ°á»›c báº±ng nhau</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">split_into</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">num_groups</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> empty</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">num_groups</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      each_with_index </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">elem</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> groups</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">i </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain"> num_groups</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> elem </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      groups</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Sá»­ dá»¥ng refinements</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">using ArrayExtensions</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># TÃ¬m pháº§n tá»­ phá»• biáº¿n nháº¥t</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">6</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">most_frequent  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># TÃ­nh trung bÃ¬nh cÃ³ trá»ng sá»‘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">diem </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">8.5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7.0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">9.5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">trong_so </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">0.3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0.2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0.5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">diem</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">weighted_average</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">trong_so</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 8.55</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Chia máº£ng thÃ nh cÃ¡c nhÃ³m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">1.</span><span class="token number" style="color:rgb(181, 206, 168)">.10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_a</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">split_into</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [[1, 4, 7, 10], [2, 5, 8], [3, 6, 9]]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-binary-packing-vá»›i-packunpack">ğŸ“¦ Binary Packing vá»›i pack/unpack<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-chuyen-gia/#-binary-packing-v%E1%BB%9Bi-packunpack" class="hash-link" aria-label="Direct link to ğŸ“¦ Binary Packing vá»›i pack/unpack" title="Direct link to ğŸ“¦ Binary Packing vá»›i pack/unpack">â€‹</a></h2>
<p>Sá»­ dá»¥ng <code>pack</code> vÃ  <code>unpack</code> Ä‘á»ƒ chuyá»ƒn Ä‘á»•i giá»¯a máº£ng vÃ  dá»¯ liá»‡u nhá»‹ phÃ¢n:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># Chuyá»ƒn Ä‘á»•i máº£ng sá»‘ nguyÃªn thÃ nh dá»¯ liá»‡u nhá»‹ phÃ¢n</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">so_nguyen </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">binary_data </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> so_nguyen</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">pack</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'C*'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># 'C' = unsigned char (8-bit)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Chuyá»ƒn Ä‘á»•i ngÆ°á»£c láº¡i tá»« dá»¯ liá»‡u nhá»‹ phÃ¢n thÃ nh máº£ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">so_nguyen_moi </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> binary_data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">unpack</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'C*'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [1, 2, 3, 4, 5]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># ÄÃ³ng gÃ³i cáº¥u trÃºc dá»¯ liá»‡u phá»©c táº¡p</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">serialize_point</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">pack</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'d3'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># 'd' = double precision float (64-bit)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">deserialize_point</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">binary</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  binary</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">unpack</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'d3'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [x, y, z]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># á»¨ng dá»¥ng thá»±c táº¿: LÆ°u trá»¯ hiá»‡u quáº£ máº£ng lá»›n</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">save_large_array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> filename</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token builtin" style="color:rgb(86, 156, 214)">File</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">open</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">filename</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'wb'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">file</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># LÆ°u kÃ­ch thÆ°á»›c máº£ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    file</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">write</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">size</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">pack</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'N'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># LÆ°u dá»¯ liá»‡u</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    file</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">write</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">pack</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'d*'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">load_large_array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">filename</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token builtin" style="color:rgb(86, 156, 214)">File</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">open</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">filename</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'rb'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">file</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># Äá»c kÃ­ch thÆ°á»›c máº£ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    size </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> file</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">read</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">unpack</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'N'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># Äá»c dá»¯ liá»‡u</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    file</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">read</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">size </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">unpack</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'d*'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-biá»ƒu-diá»…n-máº£ng-dÆ°á»›i-dáº¡ng-bitset">ğŸ² Biá»ƒu Diá»…n Máº£ng DÆ°á»›i Dáº¡ng BitSet<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-chuyen-gia/#-bi%E1%BB%83u-di%E1%BB%85n-m%E1%BA%A3ng-d%C6%B0%E1%BB%9Bi-d%E1%BA%A1ng-bitset" class="hash-link" aria-label="Direct link to ğŸ² Biá»ƒu Diá»…n Máº£ng DÆ°á»›i Dáº¡ng BitSet" title="Direct link to ğŸ² Biá»ƒu Diá»…n Máº£ng DÆ°á»›i Dáº¡ng BitSet">â€‹</a></h2>
<p>Sá»­ dá»¥ng biá»ƒu diá»…n bit Ä‘á»ƒ tá»‘i Æ°u hÃ³a bá»™ nhá»› cho cÃ¡c táº­p há»£p sá»‘ nguyÃªn:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">BitSet</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">initialize</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">size</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token variable" style="color:rgb(156, 220, 254)">@size</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> size</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token variable" style="color:rgb(156, 220, 254)">@bits</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">size </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">32.0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">ceil</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">index</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">nil</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> index </span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;=</span><span class="token plain"> </span><span class="token variable" style="color:rgb(156, 220, 254)">@size</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    word_index </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> index </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    bit_index </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> index </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token variable" style="color:rgb(156, 220, 254)">@bits</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">word_index</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> bit_index</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">!=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">index</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">nil</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> index </span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;=</span><span class="token plain"> </span><span class="token variable" style="color:rgb(156, 220, 254)">@size</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    word_index </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> index </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    bit_index </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> index </span><span class="token operator" style="color:rgb(212, 212, 212)">%</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> value</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token variable" style="color:rgb(156, 220, 254)">@bits</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">word_index</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> bit_index</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token variable" style="color:rgb(156, 220, 254)">@bits</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">word_index</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">~</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> bit_index</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">to_a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">0.</span><span class="token operator" style="color:rgb(212, 212, 212)">..</span><span class="token variable" style="color:rgb(156, 220, 254)">@size</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">select </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">i</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">self</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">union</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">other</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    result </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">BitSet</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token variable" style="color:rgb(156, 220, 254)">@size</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token variable" style="color:rgb(156, 220, 254)">@bits</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">each_with_index </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">word</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      result</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">instance_variable_get</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token variable" style="color:rgb(156, 220, 254)">@bits</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> word </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> other</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">instance_variable_get</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token variable" style="color:rgb(156, 220, 254)">@bits</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    result</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">intersection</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">other</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    result </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">BitSet</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token variable" style="color:rgb(156, 220, 254)">@size</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token variable" style="color:rgb(156, 220, 254)">@bits</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">each_with_index </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">word</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      result</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">instance_variable_get</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token variable" style="color:rgb(156, 220, 254)">@bits</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> word </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token plain"> other</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">instance_variable_get</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token variable" style="color:rgb(156, 220, 254)">@bits</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    result</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Sá»­ dá»¥ng BitSet Ä‘á»ƒ biá»ƒu diá»…n táº­p há»£p hiá»‡u quáº£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">max_value </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">_000_000</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">bitset </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">BitSet</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">max_value </span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># ÄÃ¡nh dáº¥u cÃ¡c sá»‘ nguyÃªn tá»‘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'prime'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Prime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">each</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">max_value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">prime</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  bitset</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">prime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Kiá»ƒm tra sá»‘ nguyÃªn tá»‘ nhanh chÃ³ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">bitset</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">997</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">bitset</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">998</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Táº¡o táº­p há»£p cÃ¡c sá»‘ nguyÃªn tá»‘ trong khoáº£ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">primes_under_100 </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">0.</span><span class="token number" style="color:rgb(181, 206, 168)">.100</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">select </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">n</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> bitset</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-táº¡o-máº£ng-n-chiá»u">ğŸ§© Táº¡o Máº£ng N Chiá»u<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-chuyen-gia/#-t%E1%BA%A1o-m%E1%BA%A3ng-n-chi%E1%BB%81u" class="hash-link" aria-label="Direct link to ğŸ§© Táº¡o Máº£ng N Chiá»u" title="Direct link to ğŸ§© Táº¡o Máº£ng N Chiá»u">â€‹</a></h2>
<p>Táº¡o vÃ  lÃ m viá»‡c vá»›i máº£ng Ä‘a chiá»u má»™t cÃ¡ch linh hoáº¡t:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">NDimensionalArray</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">initialize</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">dimensions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> default_value </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">nil</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token plain">block</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token variable" style="color:rgb(156, 220, 254)">@dimensions</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> dimensions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">dup</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token variable" style="color:rgb(156, 220, 254)">@dimensions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">empty</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token variable" style="color:rgb(156, 220, 254)">@data</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> default_value</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      current_dim </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token variable" style="color:rgb(156, 220, 254)">@dimensions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">shift</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token variable" style="color:rgb(156, 220, 254)">@data</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">current_dim</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">i</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> block_given</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token class-name" style="color:rgb(78, 201, 176)">NDimensionalArray</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token variable" style="color:rgb(156, 220, 254)">@dimensions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">dup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> default_value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">coords</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> block</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">call</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">coords</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token class-name" style="color:rgb(78, 201, 176)">NDimensionalArray</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token variable" style="color:rgb(156, 220, 254)">@dimensions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">dup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> default_value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">indices</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token variable" style="color:rgb(156, 220, 254)">@data</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> indices</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">empty</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    current_index </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> indices</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">shift</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> indices</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">empty</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token variable" style="color:rgb(156, 220, 254)">@data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">current_index</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token variable" style="color:rgb(156, 220, 254)">@data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">current_index</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">indices</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">indices</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> indices</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">size </span><span class="token operator" style="color:rgb(212, 212, 212)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token variable" style="color:rgb(156, 220, 254)">@data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">indices</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> value</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      current_index </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> indices</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">shift</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token variable" style="color:rgb(156, 220, 254)">@data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">current_index</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">indices</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> value</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">each</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token plain">block</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token variable" style="color:rgb(156, 220, 254)">@data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">is_a</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token builtin" style="color:rgb(86, 156, 214)">Array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token variable" style="color:rgb(156, 220, 254)">@data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">each_with_index </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">subarray</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> subarray</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">is_a</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">NDimensionalArray</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          subarray</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">each_with_coords </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">coords</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token keyword" style="color:rgb(86, 156, 214)">yield</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">coords</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token keyword" style="color:rgb(86, 156, 214)">yield</span><span class="token plain"> subarray</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> i</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">yield</span><span class="token plain"> </span><span class="token variable" style="color:rgb(156, 220, 254)">@data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">each_with_coords</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token plain">block</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token variable" style="color:rgb(156, 220, 254)">@data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">is_a</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token builtin" style="color:rgb(86, 156, 214)">Array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token variable" style="color:rgb(156, 220, 254)">@data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">each_with_index </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">subarray</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> subarray</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">is_a</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">NDimensionalArray</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          subarray</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">each_with_coords </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">coords</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token keyword" style="color:rgb(86, 156, 214)">yield</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">coords</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token keyword" style="color:rgb(86, 156, 214)">yield</span><span class="token plain"> subarray</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> i</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">yield</span><span class="token plain"> </span><span class="token variable" style="color:rgb(156, 220, 254)">@data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">to_a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token variable" style="color:rgb(156, 220, 254)">@data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">is_a</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token builtin" style="color:rgb(86, 156, 214)">Array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token variable" style="color:rgb(156, 220, 254)">@data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">map </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">item</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">is_a</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">NDimensionalArray</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_a </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> item </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token variable" style="color:rgb(156, 220, 254)">@data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Táº¡o ma tráº­n 3x3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">matrix </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">NDimensionalArray</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">matrix</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">matrix</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">matrix</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">9</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Táº¡o tensor 3x3x3 vá»›i giÃ¡ trá»‹ lÃ  tá»•ng cÃ¡c chá»‰ sá»‘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">tensor </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">NDimensionalArray</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> j</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> k</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token plain"> j </span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token plain"> k </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Truy cáº­p giÃ¡ trá»‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">tensor</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 3 (1 + 2 + 0)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-chuá»—i-enumerator-tÃ¹y-chá»‰nh">ğŸ”— Chuá»—i Enumerator TÃ¹y Chá»‰nh<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-chuyen-gia/#-chu%E1%BB%97i-enumerator-t%C3%B9y-ch%E1%BB%89nh" class="hash-link" aria-label="Direct link to ğŸ”— Chuá»—i Enumerator TÃ¹y Chá»‰nh" title="Direct link to ğŸ”— Chuá»—i Enumerator TÃ¹y Chá»‰nh">â€‹</a></h2>
<p>Táº¡o vÃ  káº¿t há»£p cÃ¡c enumerator tÃ¹y chá»‰nh Ä‘á»ƒ xá»­ lÃ½ dá»¯ liá»‡u phá»©c táº¡p:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">module</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">EnumeratorChaining</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  refine Enumerator </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">chain</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">other</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token class-name" style="color:rgb(78, 201, 176)">Enumerator</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">yielder</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">each</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">value</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> yielder </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> value </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        other</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">each</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">value</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> yielder </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> value </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">zip_with</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">other</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token class-name" style="color:rgb(78, 201, 176)">Enumerator</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">yielder</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        loop </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          yielder </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token keyword" style="color:rgb(86, 156, 214)">self</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">next</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> other</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">next</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">rescue</span><span class="token plain"> StopIteration</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">interleave</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">other</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token class-name" style="color:rgb(78, 201, 176)">Enumerator</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">yielder</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        loop </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          yielder </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">self</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">next</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          yielder </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> other</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">next</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">rescue</span><span class="token plain"> StopIteration</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">batch</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">size</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token class-name" style="color:rgb(78, 201, 176)">Enumerator</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">yielder</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        buffer </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">each</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">item</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          buffer </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> item</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> buffer</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">size </span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;=</span><span class="token plain"> size</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            yielder </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> buffer</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            buffer </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        yielder </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> buffer </span><span class="token keyword" style="color:rgb(86, 156, 214)">unless</span><span class="token plain"> buffer</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">empty</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">using EnumeratorChaining</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Káº¿t há»£p cÃ¡c dÃ£y sá»‘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">fibonacci </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Enumerator</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">yielder</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  a</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> b </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  loop </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    yielder </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> a</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    a</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> b </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token plain"> b</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">squares </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Enumerator</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">yielder</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  n </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  loop </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    yielder </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> n </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> n</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    n </span><span class="token operator" style="color:rgb(212, 212, 212)">+=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Káº¿t há»£p hai dÃ£y sá»‘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">combined </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> fibonacci</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">lazy</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">take</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">chain</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">squares</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">lazy</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">take</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">combined</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_a  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 0, 1, 4, 9, 16, 25, 36, 49, 64, 81]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># GhÃ©p cáº·p cÃ¡c pháº§n tá»­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pairs </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> fibonacci</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">lazy</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">take</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">zip_with</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">squares</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">lazy</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pairs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">take</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">force  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [[0, 0], [1, 1], [1, 4], [2, 9], [3, 16]]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Xen káº½ cÃ¡c pháº§n tá»­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">interleaved </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> fibonacci</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">lazy</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">take</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">interleave</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">squares</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">lazy</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">take</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">interleaved</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_a  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [0, 0, 1, 1, 1, 4, 2, 9, 3, 16]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Xá»­ lÃ½ theo lÃ´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">batched </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">1.</span><span class="token number" style="color:rgb(181, 206, 168)">.10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">each</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">batch</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">batched</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_a  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [[1, 2, 3], [4, 5, 6], [7, 8, 9], [10]]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-káº¿t-luáº­n">ğŸ¯ Káº¿t luáº­n<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-chuyen-gia/#-k%E1%BA%BFt-lu%E1%BA%ADn" class="hash-link" aria-label="Direct link to ğŸ¯ Káº¿t luáº­n" title="Direct link to ğŸ¯ Káº¿t luáº­n">â€‹</a></h2>
<p>Nhá»¯ng ká»¹ thuáº­t chuyÃªn gia nÃ y Ä‘áº¡i diá»‡n cho trÃ¬nh Ä‘á»™ cao nháº¥t trong viá»‡c lÃ m viá»‡c vá»›i máº£ng trong Ruby. ChÃºng khÃ´ng chá»‰ giÃºp báº¡n viáº¿t code hiá»‡u quáº£ vÃ  tá»‘i Æ°u mÃ  cÃ²n má»Ÿ ra nhá»¯ng kháº£ nÄƒng má»›i trong viá»‡c xá»­ lÃ½ dá»¯ liá»‡u phá»©c táº¡p.</p>
<p>HÃ£y nhá»› ráº±ng, vá»›i sá»©c máº¡nh lá»›n Ä‘i kÃ¨m trÃ¡ch nhiá»‡m lá»›n. Nhá»¯ng ká»¹ thuáº­t nÃ y ráº¥t máº¡nh máº½ nhÆ°ng cÅ©ng cÃ³ thá»ƒ lÃ m cho code cá»§a báº¡n trá»Ÿ nÃªn khÃ³ hiá»ƒu náº¿u sá»­ dá»¥ng khÃ´ng Ä‘Ãºng cÃ¡ch. LuÃ´n cÃ¢n nháº¯c giá»¯a sá»± phá»©c táº¡p vÃ  tÃ­nh dá»… Ä‘á»c cá»§a code.</p>
<p>Báº¡n Ä‘Ã£ sáºµn sÃ ng trá»Ÿ thÃ nh báº­c tháº§y vá» máº£ng trong Ruby chÆ°a? HÃ£y thá»­ nghiá»‡m vÃ  Ã¡p dá»¥ng nhá»¯ng ká»¹ thuáº­t nÃ y vÃ o dá»± Ã¡n cá»§a báº¡n!</p>
<hr>
<p>Báº¡n cÃ³ ká»¹ thuáº­t xá»­ lÃ½ máº£ng nÃ¢ng cao nÃ o khÃ¡c muá»‘n chia sáº»? HÃ£y Ä‘á»ƒ láº¡i bÃ¬nh luáº­n bÃªn dÆ°á»›i nhÃ©!</p>]]></content:encoded>
            <category>Ruby</category>
            <category>Arrays</category>
            <category>Expert</category>
        </item>
        <item>
            <title><![CDATA[Báº­c Tháº§y Xá»­ LÃ½ Máº£ng Trong Ruby: Nhá»¯ng Ká»¹ Thuáº­t NÃ¢ng Cao Äá»‰nh Cao]]></title>
            <link>https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-nang-cao/</link>
            <guid>https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-nang-cao/</guid>
            <pubDate>Tue, 25 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Ruby Arrays Advanced]]></description>
            <content:encoded><![CDATA[<p><img decoding="async" loading="lazy" src="https://images.unsplash.com/photo-1517694712202-14dd9538aa97?ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1350&amp;q=80" alt="Ruby Arrays Advanced" class="img_VBoq"></p>
<p>Báº¡n Ä‘Ã£ thÃ nh tháº¡o cÃ¡c ká»¹ thuáº­t cÆ¡ báº£n vÃ  trung cáº¥p vá» máº£ng trong Ruby? ÄÃ£ Ä‘áº¿n lÃºc khÃ¡m phÃ¡ nhá»¯ng ká»¹ thuáº­t nÃ¢ng cao, nhá»¯ng "vÅ© khÃ­ bÃ­ máº­t" giÃºp code cá»§a báº¡n trá»Ÿ nÃªn tinh táº¿, hiá»‡u quáº£ vÃ  Ä‘áº³ng cáº¥p hÆ¡n. HÃ£y cÃ¹ng Ä‘i sÃ¢u vÃ o tháº¿ giá»›i cá»§a nhá»¯ng báº­c tháº§y Ruby!</p>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="ï¸-pattern-matching-vá»›i-máº£ng---phÃ©p-thuáº­t-má»›i-tá»«-ruby-30">ğŸ§™â€â™‚ï¸ Pattern Matching vá»›i Máº£ng - PhÃ©p Thuáº­t Má»›i tá»« Ruby 3.0<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-nang-cao/#%EF%B8%8F-pattern-matching-v%E1%BB%9Bi-m%E1%BA%A3ng---ph%C3%A9p-thu%E1%BA%ADt-m%E1%BB%9Bi-t%E1%BB%AB-ruby-30" class="hash-link" aria-label="Direct link to ğŸ§™â€â™‚ï¸ Pattern Matching vá»›i Máº£ng - PhÃ©p Thuáº­t Má»›i tá»« Ruby 3.0" title="Direct link to ğŸ§™â€â™‚ï¸ Pattern Matching vá»›i Máº£ng - PhÃ©p Thuáº­t Má»›i tá»« Ruby 3.0">â€‹</a></h2>
<p>Pattern matching lÃ  má»™t trong nhá»¯ng tÃ­nh nÄƒng máº¡nh máº½ nháº¥t Ä‘Æ°á»£c giá»›i thiá»‡u tá»« Ruby 3.0, giÃºp báº¡n trÃ­ch xuáº¥t dá»¯ liá»‡u tá»« cÃ¡c cáº¥u trÃºc phá»©c táº¡p má»™t cÃ¡ch dá»… dÃ ng:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">phan_tich_du_lieu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">case</span><span class="token plain"> data</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">in</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">id_nguoi_dung</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">nam</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> thang</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> ngay</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">nhan</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    puts </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"NgÆ°á»i dÃ¹ng </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">id_nguoi_dung</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)"> vÃ o ngÃ y </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">ngay</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">/</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">thang</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">/</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">nam</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)"> vá»›i nhÃ£n: </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">nhan</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token string-literal interpolation content">inspect</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">in</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">id_nguoi_dung</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> thoi_gian</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    puts </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"NgÆ°á»i dÃ¹ng </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">id_nguoi_dung</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)"> vÃ o lÃºc </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">thoi_gian</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    puts </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Dá»¯ liá»‡u khÃ´ng há»£p lá»‡"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Sá»­ dá»¥ng pattern matching</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">du_lieu </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">42</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">2023</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">25</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'ruby'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'arrays'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">phan_tich_du_lieu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">du_lieu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; "NgÆ°á»i dÃ¹ng 42 vÃ o ngÃ y 25/7/2023 vá»›i nhÃ£n: [\"ruby\", \"arrays\"]"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Pattern matching trong tham sá»‘ hÃ m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">xu_ly_toa_do</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  puts </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Tá»a Ä‘á»™ 2D: (</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">x</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">, </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">y</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">), Äá»™ cao: </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">z</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">xu_ly_toa_do</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">20</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; "Tá»a Ä‘á»™ 2D: (10, 20), Äá»™ cao: 5"</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-lazy-enumerators---sá»©c-máº¡nh-cá»§a-sá»±-lÆ°á»i-biáº¿ng">ğŸ”„ Lazy Enumerators - Sá»©c Máº¡nh cá»§a Sá»± LÆ°á»i Biáº¿ng<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-nang-cao/#-lazy-enumerators---s%E1%BB%A9c-m%E1%BA%A1nh-c%E1%BB%A7a-s%E1%BB%B1-l%C6%B0%E1%BB%9Di-bi%E1%BA%BFng" class="hash-link" aria-label="Direct link to ğŸ”„ Lazy Enumerators - Sá»©c Máº¡nh cá»§a Sá»± LÆ°á»i Biáº¿ng" title="Direct link to ğŸ”„ Lazy Enumerators - Sá»©c Máº¡nh cá»§a Sá»± LÆ°á»i Biáº¿ng">â€‹</a></h2>
<p>Lazy enumerators cho phÃ©p báº¡n xá»­ lÃ½ cÃ¡c táº­p dá»¯ liá»‡u lá»›n má»™t cÃ¡ch hiá»‡u quáº£ báº±ng cÃ¡ch chá»‰ tÃ­nh toÃ¡n khi cáº§n thiáº¿t:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># Táº¡o má»™t dÃ£y vÃ´ háº¡n cÃ¡c sá»‘ nguyÃªn tá»‘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">require</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'prime'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">so_nguyen_to_vo_han </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> Prime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">each</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># KhÃ´ng hiá»‡u quáº£ vÃ  sáº½ cháº¡y mÃ£i mÃ£i</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># so_nguyen_to_dau = so_nguyen_to_vo_han.take(10)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Sá»­ dá»¥ng lazy Ä‘á»ƒ xá»­ lÃ½ hiá»‡u quáº£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">so_nguyen_to_lon </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> so_nguyen_to_vo_han</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">lazy</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">select </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">p</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> p </span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1000</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">take</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">force</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [1009, 1013, 1019, 1021, 1031]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Xá»­ lÃ½ tá»‡p lá»›n theo dÃ²ng mÃ  khÃ´ng cáº§n Ä‘á»c toÃ n bá»™ vÃ o bá»™ nhá»›</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">doc_va_xu_ly_tep_lon</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">duong_dan</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token builtin" style="color:rgb(86, 156, 214)">File</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">open</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">duong_dan</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'r'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">each_line</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">lazy</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">map</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token symbol">:chomp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">select </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">line</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> line</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">include</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'ERROR'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">take</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">force</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-nhÃ³m-dá»¯-liá»‡u-vá»›i-each_with_object">ğŸ§© NhÃ³m Dá»¯ Liá»‡u vá»›i each_with_object<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-nang-cao/#-nh%C3%B3m-d%E1%BB%AF-li%E1%BB%87u-v%E1%BB%9Bi-each_with_object" class="hash-link" aria-label="Direct link to ğŸ§© NhÃ³m Dá»¯ Liá»‡u vá»›i each_with_object" title="Direct link to ğŸ§© NhÃ³m Dá»¯ Liá»‡u vá»›i each_with_object">â€‹</a></h2>
<p>PhÆ°Æ¡ng thá»©c <code>each_with_object</code> cung cáº¥p cÃ¡ch tiáº¿p cáº­n thanh lá»‹ch Ä‘á»ƒ xÃ¢y dá»±ng cáº¥u trÃºc dá»¯ liá»‡u phá»©c táº¡p:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token plain">sinh_vien </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Minh"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">lop</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"12A"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">diem</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8.5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"HÆ°Æ¡ng"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">lop</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"12A"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">diem</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">9.0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Tuáº¥n"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">lop</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"12B"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">diem</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7.5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Linh"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">lop</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"12B"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">diem</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8.0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Nam"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">lop</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"12C"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">diem</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">9.5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># NhÃ³m sinh viÃªn theo lá»›p</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">sinh_vien_theo_lop </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> sinh_vien</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">each_with_object</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">sv</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> result</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">sv</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token symbol">:lop</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">||=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> sv</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      "12A" =&gt; [{ten: "Minh", lop: "12A", diem: 8.5}, {ten: "HÆ°Æ¡ng", lop: "12A", diem: 9.0}],</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      "12B" =&gt; [{ten: "Tuáº¥n", lop: "12B", diem: 7.5}, {ten: "Linh", lop: "12B", diem: 8.0}],</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      "12C" =&gt; [{ten: "Nam", lop: "12C", diem: 9.5}]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#    }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># TÃ­nh Ä‘iá»ƒm trung bÃ¬nh theo lá»›p</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">diem_trung_binh_theo_lop </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> sinh_vien</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">each_with_object</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">sv</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> result</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  lop </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> sv</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token symbol">:lop</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  result</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">lop</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">||=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">tong_diem</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">so_sv</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  result</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">lop</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token symbol">:tong_diem</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">+=</span><span class="token plain"> sv</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token symbol">:diem</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  result</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">lop</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token symbol">:so_sv</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">+=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">transform_values </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">v</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token symbol">:tong_diem</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token symbol">:so_sv</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; {"12A" =&gt; 8.75, "12B" =&gt; 7.75, "12C" =&gt; 9.5}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-tÃ¹y-chá»‰nh-phÆ°Æ¡ng-thá»©c-uniq-vá»›i-khá»‘i-lá»‡nh">ğŸ§  TÃ¹y Chá»‰nh PhÆ°Æ¡ng Thá»©c uniq vá»›i Khá»‘i Lá»‡nh<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-nang-cao/#-t%C3%B9y-ch%E1%BB%89nh-ph%C6%B0%C6%A1ng-th%E1%BB%A9c-uniq-v%E1%BB%9Bi-kh%E1%BB%91i-l%E1%BB%87nh" class="hash-link" aria-label="Direct link to ğŸ§  TÃ¹y Chá»‰nh PhÆ°Æ¡ng Thá»©c uniq vá»›i Khá»‘i Lá»‡nh" title="Direct link to ğŸ§  TÃ¹y Chá»‰nh PhÆ°Æ¡ng Thá»©c uniq vá»›i Khá»‘i Lá»‡nh">â€‹</a></h2>
<p>PhÆ°Æ¡ng thá»©c <code>uniq</code> cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¹y chá»‰nh Ä‘á»ƒ xÃ¡c Ä‘á»‹nh "tÃ­nh duy nháº¥t" dá»±a trÃªn tiÃªu chÃ­ phá»©c táº¡p:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token plain">san_pham </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">id</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"iPhone"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">hang</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Apple"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">gia</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">20000000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">id</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Galaxy"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">hang</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Samsung"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">gia</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">18000000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">id</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"iPhone Pro"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">hang</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Apple"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">gia</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">30000000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">id</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Redmi"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">hang</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Xiaomi"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">gia</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5000000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Láº¥y sáº£n pháº©m duy nháº¥t theo hÃ£ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">san_pham_theo_hang </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> san_pham</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">uniq </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">sp</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> sp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token symbol">:hang</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      {id: 1, ten: "iPhone", hang: "Apple", gia: 20000000},</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      {id: 2, ten: "Galaxy", hang: "Samsung", gia: 18000000},</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      {id: 4, ten: "Redmi", hang: "Xiaomi", gia: 5000000}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#    ]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># á»¨ng dá»¥ng thá»±c táº¿: Lá»c email trÃ¹ng láº·p khÃ´ng phÃ¢n biá»‡t hoa thÆ°á»ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">emails </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"user@example.com"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"USER@EXAMPLE.COM"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"another@gmail.com"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Another@Gmail.com"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">emails_duy_nhat </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> emails</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">uniq </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">email</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> email</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">downcase </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; ["user@example.com", "another@gmail.com"]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-tá»•-há»£p-vÃ -hoÃ¡n-vá»‹-vá»›i-máº£ng">ğŸ§® Tá»• Há»£p vÃ  HoÃ¡n Vá»‹ vá»›i Máº£ng<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-nang-cao/#-t%E1%BB%95-h%E1%BB%A3p-v%C3%A0-ho%C3%A1n-v%E1%BB%8B-v%E1%BB%9Bi-m%E1%BA%A3ng" class="hash-link" aria-label="Direct link to ğŸ§® Tá»• Há»£p vÃ  HoÃ¡n Vá»‹ vá»›i Máº£ng" title="Direct link to ğŸ§® Tá»• Há»£p vÃ  HoÃ¡n Vá»‹ vá»›i Máº£ng">â€‹</a></h2>
<p>Ruby cung cáº¥p cÃ¡c phÆ°Æ¡ng thá»©c máº¡nh máº½ Ä‘á»ƒ lÃ m viá»‡c vá»›i tá»• há»£p vÃ  hoÃ¡n vá»‹:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token plain">nguyen_to </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Táº¡o táº¥t cáº£ cÃ¡c tá»• há»£p cÃ³ thá»ƒ cÃ³ kÃ­ch thÆ°á»›c 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">to_hop </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> nguyen_to</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">combination</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_a</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [[2, 3], [2, 5], [2, 7], [3, 5], [3, 7], [5, 7]]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Táº¡o táº¥t cáº£ cÃ¡c hoÃ¡n vá»‹ cÃ³ thá»ƒ cÃ³</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">hoan_vi </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> nguyen_to</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">permutation</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_a</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [[2, 3, 5], [2, 3, 7], [2, 5, 3], [2, 5, 7], [2, 7, 3], [2, 7, 5], ...]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># á»¨ng dá»¥ng thá»±c táº¿: Táº¡o táº¥t cáº£ cÃ¡c máº­t kháº©u cÃ³ thá»ƒ tá»« má»™t táº­p kÃ½ tá»±</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">ky_tu </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'A'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'B'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'C'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'1'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'2'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mat_khau_co_the </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> ky_tu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">repeated_permutation</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">map</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token symbol">:join</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; ["AAA", "AA1", "AA2", "A1A", "A11", "A12", "A2A", "A21", "A22", ...]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-chia-máº£ng-thÃ nh-cÃ¡c-pháº§n-báº±ng-nhau">ğŸ”ª Chia Máº£ng ThÃ nh CÃ¡c Pháº§n Báº±ng Nhau<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-nang-cao/#-chia-m%E1%BA%A3ng-th%C3%A0nh-c%C3%A1c-ph%E1%BA%A7n-b%E1%BA%B1ng-nhau" class="hash-link" aria-label="Direct link to ğŸ”ª Chia Máº£ng ThÃ nh CÃ¡c Pháº§n Báº±ng Nhau" title="Direct link to ğŸ”ª Chia Máº£ng ThÃ nh CÃ¡c Pháº§n Báº±ng Nhau">â€‹</a></h2>
<p>Táº¡o má»™t phÆ°Æ¡ng thá»©c Ä‘á»ƒ chia máº£ng thÃ nh cÃ¡c pháº§n cÃ³ kÃ­ch thÆ°á»›c gáº§n báº±ng nhau:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">balanced_split</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">num_chunks</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> empty</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    chunk_size </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">size</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_f </span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"> num_chunks</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">ceil</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    each_slice</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">chunk_size</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_a</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Chia máº£ng thÃ nh cÃ¡c pháº§n gáº§n báº±ng nhau</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">du_lieu </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">1.</span><span class="token number" style="color:rgb(181, 206, 168)">.10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_a</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">du_lieu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">balanced_split</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [[1, 2, 3, 4], [5, 6, 7], [8, 9, 10]]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># á»¨ng dá»¥ng thá»±c táº¿: PhÃ¢n chia cÃ´ng viá»‡c cho nhiá»u luá»“ng xá»­ lÃ½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cong_viec </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">1.</span><span class="token number" style="color:rgb(181, 206, 168)">.20</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_a</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">so_luong_worker </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cong_viec_theo_worker </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> cong_viec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">balanced_split</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">so_luong_worker</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [[1, 2, 3, 4, 5], [6, 7, 8, 9, 10], [11, 12, 13, 14, 15], [16, 17, 18, 19, 20]]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-phÃ¢n-Ä‘oáº¡n-máº£ng-vá»›i-slice_when">ğŸ” PhÃ¢n Äoáº¡n Máº£ng vá»›i slice_when<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-nang-cao/#-ph%C3%A2n-%C4%91o%E1%BA%A1n-m%E1%BA%A3ng-v%E1%BB%9Bi-slice_when" class="hash-link" aria-label="Direct link to ğŸ” PhÃ¢n Äoáº¡n Máº£ng vá»›i slice_when" title="Direct link to ğŸ” PhÃ¢n Äoáº¡n Máº£ng vá»›i slice_when">â€‹</a></h2>
<p>PhÆ°Æ¡ng thá»©c <code>slice_when</code> cho phÃ©p báº¡n chia máº£ng thÃ nh cÃ¡c phÃ¢n Ä‘oáº¡n dá»±a trÃªn Ä‘iá»u kiá»‡n giá»¯a cÃ¡c pháº§n tá»­ liÃªn tiáº¿p:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># PhÃ¢n Ä‘oáº¡n máº£ng sá»‘ thÃ nh cÃ¡c dÃ£y liÃªn tiáº¿p</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">so </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">6</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">9</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">12</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">day_lien_tiep </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> so</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">slice_when </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> j</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> j </span><span class="token operator" style="color:rgb(212, 212, 212)">!=</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_a</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [[1, 2, 3], [5, 6], [8, 9, 10], [12]]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># á»¨ng dá»¥ng thá»±c táº¿: NhÃ³m cÃ¡c giao dá»‹ch theo ngÃ y</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">giao_dich </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ngay</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"2023-07-20"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">so_tien</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">100000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ngay</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"2023-07-20"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">so_tien</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">200000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ngay</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"2023-07-21"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">so_tien</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">150000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ngay</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"2023-07-21"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">so_tien</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">300000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ngay</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"2023-07-23"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">so_tien</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">500000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">giao_dich_theo_ngay </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> giao_dich</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">slice_when </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> b</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token symbol">:ngay</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">!=</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token symbol">:ngay</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">to_a</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      [{ngay: "2023-07-20", so_tien: 100000}, {ngay: "2023-07-20", so_tien: 200000}],</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      [{ngay: "2023-07-21", so_tien: 150000}, {ngay: "2023-07-21", so_tien: 300000}],</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      [{ngay: "2023-07-23", so_tien: 500000}]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#    ]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-xá»­-lÃ½-máº£ng-khÃ´ng-Ä‘á»u-vá»›i-transpose">ğŸ”„ Xá»­ LÃ½ Máº£ng KhÃ´ng Äá»u vá»›i Transpose<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-nang-cao/#-x%E1%BB%AD-l%C3%BD-m%E1%BA%A3ng-kh%C3%B4ng-%C4%91%E1%BB%81u-v%E1%BB%9Bi-transpose" class="hash-link" aria-label="Direct link to ğŸ”„ Xá»­ LÃ½ Máº£ng KhÃ´ng Äá»u vá»›i Transpose" title="Direct link to ğŸ”„ Xá»­ LÃ½ Máº£ng KhÃ´ng Äá»u vá»›i Transpose">â€‹</a></h2>
<p>Khi lÃ m viá»‡c vá»›i máº£ng khÃ´ng Ä‘á»u (jagged arrays), phÆ°Æ¡ng thá»©c <code>transpose</code> tiÃªu chuáº©n sáº½ gáº·p lá»—i. HÃ£y táº¡o má»™t phiÃªn báº£n nÃ¢ng cao:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">safe_transpose</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> empty</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    max_size </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> map</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token symbol">:size</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">max</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    map </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">row</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> row</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">fill</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token keyword" style="color:rgb(86, 156, 214)">nil</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> row</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">size</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> max_size </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> row</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">size</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">transpose</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Xá»­ lÃ½ máº£ng khÃ´ng Ä‘á»u</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mang_khong_deu </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">6</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">9</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mang_chuyen_vi </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> mang_khong_deu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">safe_transpose</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      [1, 4, 6],</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      [2, 5, 7],</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      [3, nil, 8],</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      [nil, nil, 9]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#    ]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-xá»­-lÃ½-dá»¯-liá»‡u-vá»›i-pipeline-sá»­-dá»¥ng-tap-vÃ -then">ğŸš€ Xá»­ LÃ½ Dá»¯ Liá»‡u vá»›i Pipeline Sá»­ Dá»¥ng tap vÃ  then<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-nang-cao/#-x%E1%BB%AD-l%C3%BD-d%E1%BB%AF-li%E1%BB%87u-v%E1%BB%9Bi-pipeline-s%E1%BB%AD-d%E1%BB%A5ng-tap-v%C3%A0-then" class="hash-link" aria-label="Direct link to ğŸš€ Xá»­ LÃ½ Dá»¯ Liá»‡u vá»›i Pipeline Sá»­ Dá»¥ng tap vÃ  then" title="Direct link to ğŸš€ Xá»­ LÃ½ Dá»¯ Liá»‡u vá»›i Pipeline Sá»­ Dá»¥ng tap vÃ  then">â€‹</a></h2>
<p>Táº¡o cÃ¡c pipeline xá»­ lÃ½ dá»¯ liá»‡u thanh lá»‹ch vá»›i <code>tap</code> vÃ  <code>then</code>:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># Xá»­ lÃ½ dá»¯ liá»‡u theo pipeline</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">xu_ly_du_lieu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">du_lieu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  du_lieu</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">then</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">data</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">map </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">item</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">downcase </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">tap </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">data</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> puts </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Sau khi chuyá»ƒn thÃ nh chá»¯ thÆ°á»ng: </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">data</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token string-literal interpolation content">inspect</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">then</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">data</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">select </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">item</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">length </span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">tap </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">data</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> puts </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Sau khi lá»c theo Ä‘á»™ dÃ i: </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">data</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token string-literal interpolation content">inspect</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">then</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">data</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">map </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">item</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">capitalize </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">tap </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">data</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> puts </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Káº¿t quáº£ cuá»‘i cÃ¹ng: </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">data</span><span class="token string-literal interpolation content punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token string-literal interpolation content">inspect</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">xu_ly_du_lieu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"RUBY"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"JS"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"PYTHON"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"GO"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; Sau khi chuyá»ƒn thÃ nh chá»¯ thÆ°á»ng: ["ruby", "js", "python", "go"]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; Sau khi lá»c theo Ä‘á»™ dÃ i: ["ruby", "python"]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; Káº¿t quáº£ cuá»‘i cÃ¹ng: ["Ruby", "Python"]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-lÃ m-pháº³ng-máº£ng-cÃ³-chá»n-lá»c">ğŸ§¹ LÃ m Pháº³ng Máº£ng CÃ³ Chá»n Lá»c<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-nang-cao/#-l%C3%A0m-ph%E1%BA%B3ng-m%E1%BA%A3ng-c%C3%B3-ch%E1%BB%8Dn-l%E1%BB%8Dc" class="hash-link" aria-label="Direct link to ğŸ§¹ LÃ m Pháº³ng Máº£ng CÃ³ Chá»n Lá»c" title="Direct link to ğŸ§¹ LÃ m Pháº³ng Máº£ng CÃ³ Chá»n Lá»c">â€‹</a></h2>
<p>Táº¡o má»™t phÆ°Æ¡ng thá»©c Ä‘á»ƒ lÃ m pháº³ng máº£ng lá»“ng nhau má»™t cÃ¡ch cÃ³ chá»n lá»c:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:rgb(220, 220, 170)">selective_flatten</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">condition</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    each_with_object</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">element</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> result</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> element</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">is_a</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token builtin" style="color:rgb(86, 156, 214)">Array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;&amp;</span><span class="token plain"> condition</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">call</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">element</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        result</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">concat</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">element</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        result </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> element</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># LÃ m pháº³ng cÃ³ chá»n lá»c</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">du_lieu </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">6</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">9</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">ket_qua </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> du_lieu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">selective_flatten </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">arr</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> arr</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">size </span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, [9]]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># á»¨ng dá»¥ng thá»±c táº¿: LÃ m pháº³ng cáº¥u trÃºc dá»¯ liá»‡u phá»©c táº¡p</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">cau_truc </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">id</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Minh"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">id</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"HÆ°Æ¡ng"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">id</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Tuáº¥n"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">id</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Linh"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">id</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Nam"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">nguoi_dung </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> cau_truc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">selective_flatten </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">arr</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> arr</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">all</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">e</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">is_a</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token builtin" style="color:rgb(86, 156, 214)">Hash</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;&amp;</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">key</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token symbol">:id</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [{id: 1, ten: "Minh"}, {id: 2, ten: "HÆ°Æ¡ng"}, {id: 3, ten: "Tuáº¥n"}, {id: 4, ten: "Linh"}, [{id: 5, ten: "Nam"}]]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-káº¿t-luáº­n">ğŸ¯ Káº¿t luáº­n<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-nang-cao/#-k%E1%BA%BFt-lu%E1%BA%ADn" class="hash-link" aria-label="Direct link to ğŸ¯ Káº¿t luáº­n" title="Direct link to ğŸ¯ Káº¿t luáº­n">â€‹</a></h2>
<p>Nhá»¯ng ká»¹ thuáº­t nÃ¢ng cao nÃ y sáº½ giÃºp báº¡n xá»­ lÃ½ máº£ng trong Ruby má»™t cÃ¡ch máº¡nh máº½ vÃ  tinh táº¿ hÆ¡n. Viá»‡c náº¯m vá»¯ng vÃ  Ã¡p dá»¥ng chÃºng khÃ´ng chá»‰ giÃºp code cá»§a báº¡n ngáº¯n gá»n, dá»… Ä‘á»c mÃ  cÃ²n tá»‘i Æ°u hiá»‡u suáº¥t xá»­ lÃ½ dá»¯ liá»‡u.</p>
<p>HÃ£y thá»­ nghiá»‡m vÃ  káº¿t há»£p cÃ¡c ká»¹ thuáº­t nÃ y Ä‘á»ƒ táº¡o ra nhá»¯ng giáº£i phÃ¡p sÃ¡ng táº¡o cho cÃ¡c váº¥n Ä‘á» phá»©c táº¡p trong dá»± Ã¡n cá»§a báº¡n!</p>
<hr>
<p>Báº¡n Ä‘Ã£ tá»«ng Ã¡p dá»¥ng ká»¹ thuáº­t nÃ¢ng cao nÃ o khÃ¡c khi lÃ m viá»‡c vá»›i máº£ng trong Ruby? HÃ£y chia sáº» kinh nghiá»‡m cá»§a báº¡n trong pháº§n bÃ¬nh luáº­n nhÃ©!</p>]]></content:encoded>
            <category>Ruby</category>
            <category>Arrays</category>
            <category>Advanced</category>
        </item>
        <item>
            <title><![CDATA[Nghá»‡ Thuáº­t Xá»­ LÃ½ Máº£ng Trong Ruby: Ká»¹ Thuáº­t Trung Cáº¥p ÄÃ¡ng Kinh Ngáº¡c]]></title>
            <link>https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-trung-cap/</link>
            <guid>https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-trung-cap/</guid>
            <pubDate>Mon, 24 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Ruby Arrays Intermediate]]></description>
            <content:encoded><![CDATA[<p><img decoding="async" loading="lazy" src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1350&amp;q=80" alt="Ruby Arrays Intermediate" class="img_VBoq"></p>
<p>Báº¡n Ä‘Ã£ náº¯m vá»¯ng cÃ¡c kiáº¿n thá»©c cÆ¡ báº£n vá» máº£ng trong Ruby? ÄÃ£ Ä‘áº¿n lÃºc nÃ¢ng cao ká»¹ nÄƒng cá»§a báº¡n vá»›i nhá»¯ng ká»¹ thuáº­t trung cáº¥p Ä‘áº§y sá»©c máº¡nh. BÃ i viáº¿t nÃ y sáº½ giá»›i thiá»‡u nhá»¯ng phÆ°Æ¡ng phÃ¡p xá»­ lÃ½ máº£ng thÃ´ng minh hÆ¡n, giÃºp code cá»§a báº¡n trá»Ÿ nÃªn sáº¡ch sáº½ vÃ  hiá»‡u quáº£ hÆ¡n.</p>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-cáº¯t-máº£ng-vá»›i-slice-range-vÃ -chá»‰-sá»‘-Ã¢m">ğŸ”ª Cáº¯t máº£ng vá»›i slice, range vÃ  chá»‰ sá»‘ Ã¢m<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-trung-cap/#-c%E1%BA%AFt-m%E1%BA%A3ng-v%E1%BB%9Bi-slice-range-v%C3%A0-ch%E1%BB%89-s%E1%BB%91-%C3%A2m" class="hash-link" aria-label="Direct link to ğŸ”ª Cáº¯t máº£ng vá»›i slice, range vÃ  chá»‰ sá»‘ Ã¢m" title="Direct link to ğŸ”ª Cáº¯t máº£ng vá»›i slice, range vÃ  chá»‰ sá»‘ Ã¢m">â€‹</a></h2>
<p>Ruby cung cáº¥p nhiá»u cÃ¡ch linh hoáº¡t Ä‘á»ƒ cáº¯t vÃ  trÃ­ch xuáº¥t pháº§n tá»­ tá»« máº£ng:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token plain">du_lieu </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'a'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'b'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'c'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'d'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'e'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'f'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'g'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Sá»­ dá»¥ng slice vá»›i chá»‰ sá»‘ báº¯t Ä‘áº§u vÃ  sá»‘ lÆ°á»£ng pháº§n tá»­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">du_lieu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">slice</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">      </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; ['c', 'd', 'e']</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Sá»­ dá»¥ng range</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">du_lieu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1.</span><span class="token number" style="color:rgb(181, 206, 168)">.4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">            </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; ['b', 'c', 'd', 'e']</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">du_lieu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1.</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token number" style="color:rgb(181, 206, 168)">.4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">           </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; ['b', 'c', 'd'] (khÃ´ng bao gá»“m pháº§n tá»­ cuá»‘i)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Sá»­ dá»¥ng chá»‰ sá»‘ Ã¢m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">du_lieu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">3.</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">          </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; ['e', 'f', 'g']</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">du_lieu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">5.</span><span class="token operator" style="color:rgb(212, 212, 212)">..</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">         </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; ['c', 'd', 'e']</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-tÃ¬m-kiáº¿m-nhá»‹-phÃ¢n-vá»›i-bsearch">ğŸ§  TÃ¬m kiáº¿m nhá»‹ phÃ¢n vá»›i bsearch<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-trung-cap/#-t%C3%ACm-ki%E1%BA%BFm-nh%E1%BB%8B-ph%C3%A2n-v%E1%BB%9Bi-bsearch" class="hash-link" aria-label="Direct link to ğŸ§  TÃ¬m kiáº¿m nhá»‹ phÃ¢n vá»›i bsearch" title="Direct link to ğŸ§  TÃ¬m kiáº¿m nhá»‹ phÃ¢n vá»›i bsearch">â€‹</a></h2>
<p>Khi lÃ m viá»‡c vá»›i máº£ng Ä‘Ã£ sáº¯p xáº¿p, <code>bsearch</code> giÃºp tÃ¬m kiáº¿m pháº§n tá»­ nhanh chÃ³ng vá»›i Ä‘á»™ phá»©c táº¡p O(log n):</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token plain">so_nguyen </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">11</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">15</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">19</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">24</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">28</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">31</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">36</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">42</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># TÃ¬m giÃ¡ trá»‹ chÃ­nh xÃ¡c</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">so_nguyen</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">bsearch </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">x</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">15</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># TÃ¬m vá»‹ trÃ­ Ä‘áº§u tiÃªn thá»a mÃ£n Ä‘iá»u kiá»‡n</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">vi_tri </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> so_nguyen</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">bsearch_index </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">x</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">30</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 8 (vá»‹ trÃ­ cá»§a sá»‘ 31)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># TÃ¬m kiáº¿m phá»©c táº¡p hÆ¡n</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">diem_sinh_vien </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"An"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">diem</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7.5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"BÃ¬nh"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">diem</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8.0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"CÆ°á»ng"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">diem</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8.5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Dung"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">diem</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">9.0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">sort_by </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">sv</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> sv</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token symbol">:diem</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># TÃ¬m sinh viÃªn Ä‘áº§u tiÃªn cÃ³ Ä‘iá»ƒm &gt;= 8.5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">diem_sinh_vien</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">bsearch </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">sv</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> sv</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token symbol">:diem</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8.5</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; {ten: "CÆ°á»ng", diem: 8.5}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-chuyá»ƒn-vá»‹-ma-tráº­n---biáº¿n-Ä‘á»•i-dá»¯-liá»‡u-Ä‘a-chiá»u">ğŸ”„ Chuyá»ƒn vá»‹ ma tráº­n - Biáº¿n Ä‘á»•i dá»¯ liá»‡u Ä‘a chiá»u<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-trung-cap/#-chuy%E1%BB%83n-v%E1%BB%8B-ma-tr%E1%BA%ADn---bi%E1%BA%BFn-%C4%91%E1%BB%95i-d%E1%BB%AF-li%E1%BB%87u-%C4%91a-chi%E1%BB%81u" class="hash-link" aria-label="Direct link to ğŸ”„ Chuyá»ƒn vá»‹ ma tráº­n - Biáº¿n Ä‘á»•i dá»¯ liá»‡u Ä‘a chiá»u" title="Direct link to ğŸ”„ Chuyá»ƒn vá»‹ ma tráº­n - Biáº¿n Ä‘á»•i dá»¯ liá»‡u Ä‘a chiá»u">â€‹</a></h2>
<p>PhÆ°Æ¡ng thá»©c <code>transpose</code> cho phÃ©p báº¡n chuyá»ƒn Ä‘á»•i hÃ ng thÃ nh cá»™t vÃ  ngÆ°á»£c láº¡i trong máº£ng hai chiá»u:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token plain">ma_tran </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">6</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">9</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">ma_tran_chuyen_vi </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> ma_tran</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">transpose</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      [1, 4, 7],</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      [2, 5, 8],</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      [3, 6, 9]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#    ]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># á»¨ng dá»¥ng thá»±c táº¿: Chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u CSV</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">du_lieu_csv </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"TÃªn"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Tuá»•i"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"ThÃ nh phá»‘"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Minh"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"28"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"HÃ  Ná»™i"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"HÆ°Æ¡ng"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"25"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"ÄÃ  Náºµng"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Tuáº¥n"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"30"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"TP.HCM"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">du_lieu_theo_cot </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> du_lieu_csv</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">transpose</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      ["TÃªn", "Minh", "HÆ°Æ¡ng", "Tuáº¥n"],</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      ["Tuá»•i", "28", "25", "30"],</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      ["ThÃ nh phá»‘", "HÃ  Ná»™i", "ÄÃ  Náºµng", "TP.HCM"]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#    ]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-phÃ¢n-vÃ¹ng-máº£ng-vá»›i-partition">ğŸ§© PhÃ¢n vÃ¹ng máº£ng vá»›i partition<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-trung-cap/#-ph%C3%A2n-v%C3%B9ng-m%E1%BA%A3ng-v%E1%BB%9Bi-partition" class="hash-link" aria-label="Direct link to ğŸ§© PhÃ¢n vÃ¹ng máº£ng vá»›i partition" title="Direct link to ğŸ§© PhÃ¢n vÃ¹ng máº£ng vá»›i partition">â€‹</a></h2>
<p>PhÆ°Æ¡ng thá»©c <code>partition</code> giÃºp chia máº£ng thÃ nh hai nhÃ³m dá»±a trÃªn má»™t Ä‘iá»u kiá»‡n:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token plain">so </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">6</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">9</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Chia thÃ nh sá»‘ cháºµn vÃ  sá»‘ láº»</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">so_chan</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> so_le </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> so</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">partition </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">n</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">even</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># so_chan = [2, 4, 6, 8, 10]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># so_le = [1, 3, 5, 7, 9]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># á»¨ng dá»¥ng thá»±c táº¿: PhÃ¢n loáº¡i sinh viÃªn Ä‘áº­u/rá»›t</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">diem_thi </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">8.5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">6.7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4.2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">9.0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5.5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7.8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3.9</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">dau</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> rot </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> diem_thi</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">partition </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">diem</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> diem </span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># dau = [8.5, 6.7, 9.0, 5.5, 7.8]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># rot = [4.2, 3.9]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-káº¿t-há»£p-map-vÃ -compact-trong-chuá»—i-xá»­-lÃ½">ğŸ”— Káº¿t há»£p map vÃ  compact trong chuá»—i xá»­ lÃ½<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-trung-cap/#-k%E1%BA%BFt-h%E1%BB%A3p-map-v%C3%A0-compact-trong-chu%E1%BB%97i-x%E1%BB%AD-l%C3%BD" class="hash-link" aria-label="Direct link to ğŸ”— Káº¿t há»£p map vÃ  compact trong chuá»—i xá»­ lÃ½" title="Direct link to ğŸ”— Káº¿t há»£p map vÃ  compact trong chuá»—i xá»­ lÃ½">â€‹</a></h2>
<p>Káº¿t há»£p cÃ¡c phÆ°Æ¡ng thá»©c trong má»™t chuá»—i giÃºp code ngáº¯n gá»n vÃ  dá»… Ä‘á»c hÆ¡n:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token plain">du_lieu </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"1"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"hai"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"3"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"bá»‘n"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"5"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Chuyá»ƒn Ä‘á»•i chuá»—i thÃ nh sá»‘ vÃ  loáº¡i bá» cÃ¡c giÃ¡ trá»‹ khÃ´ng há»£p lá»‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">so </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> du_lieu</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">map </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">s</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(86, 156, 214)">Integer</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">rescue</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">compact</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [1, 3, 5]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># á»¨ng dá»¥ng thá»±c táº¿: Xá»­ lÃ½ dá»¯ liá»‡u tá»« file CSV</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">du_lieu_csv </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"12.5"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"N/A"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"8.75"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"error"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"10.0"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">gia_tri </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> du_lieu_csv</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">map </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">s</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> s </span><span class="token operator" style="color:rgb(212, 212, 212)">==</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"N/A"</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">||</span><span class="token plain"> s </span><span class="token operator" style="color:rgb(212, 212, 212)">==</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"error"</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">nil</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(86, 156, 214)">Float</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">rescue</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">compact</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [12.5, 8.75, 10.0]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-truy-cáº­p-máº£ng-lá»“ng-nhau-vá»›i-dig">ğŸ” Truy cáº­p máº£ng lá»“ng nhau vá»›i dig<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-trung-cap/#-truy-c%E1%BA%ADp-m%E1%BA%A3ng-l%E1%BB%93ng-nhau-v%E1%BB%9Bi-dig" class="hash-link" aria-label="Direct link to ğŸ” Truy cáº­p máº£ng lá»“ng nhau vá»›i dig" title="Direct link to ğŸ” Truy cáº­p máº£ng lá»“ng nhau vá»›i dig">â€‹</a></h2>
<p>PhÆ°Æ¡ng thá»©c <code>dig</code> giÃºp truy cáº­p an toÃ n vÃ o cÃ¡c pháº§n tá»­ trong máº£ng lá»“ng nhau mÃ  khÃ´ng gáº·p lá»—i <code>NoMethodError</code>:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token plain">du_lieu_nguoi_dung </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Minh"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token symbol">thong_tin</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token symbol">dia_chi</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token symbol">thanh_pho</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"HÃ  Ná»™i"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token symbol">quan</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Cáº§u Giáº¥y"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token symbol">sdt</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"0912345678"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"0987654321"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Linh"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token symbol">thong_tin</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token symbol">dia_chi</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">nil</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token symbol">sdt</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"0923456789"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Truy cáº­p an toÃ n vá»›i dig</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">du_lieu_nguoi_dung</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">dig</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token symbol">:thong_tin</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">:dia_chi</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">:thanh_pho</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; "HÃ  Ná»™i"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">du_lieu_nguoi_dung</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">dig</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token symbol">:thong_tin</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">:dia_chi</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">:thanh_pho</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; nil (khÃ´ng gÃ¢y lá»—i)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-tÃ­nh-tá»•ng-vá»›i-block-tÃ¹y-chá»‰nh">ğŸ§® TÃ­nh tá»•ng vá»›i block tÃ¹y chá»‰nh<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-trung-cap/#-t%C3%ADnh-t%E1%BB%95ng-v%E1%BB%9Bi-block-t%C3%B9y-ch%E1%BB%89nh" class="hash-link" aria-label="Direct link to ğŸ§® TÃ­nh tá»•ng vá»›i block tÃ¹y chá»‰nh" title="Direct link to ğŸ§® TÃ­nh tá»•ng vá»›i block tÃ¹y chá»‰nh">â€‹</a></h2>
<p>PhÆ°Æ¡ng thá»©c <code>sum</code> khÃ´ng chá»‰ dÃ¹ng Ä‘á»ƒ cá»™ng cÃ¡c sá»‘, mÃ  cÃ²n cÃ³ thá»ƒ tÃ¹y chá»‰nh cÃ¡ch tÃ­nh tá»•ng:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token plain">san_pham </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Ão"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">gia</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">250000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">so_luong</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"Quáº§n"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">gia</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">350000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">so_luong</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token symbol">ten</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"GiÃ y"</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">gia</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">500000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token symbol">so_luong</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># TÃ­nh tá»•ng tiá»n</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">tong_tien </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> san_pham</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">sum </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">sp</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> sp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token symbol">:gia</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> sp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token symbol">:so_luong</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 1350000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># TÃ­nh tá»•ng vá»›i giÃ¡ trá»‹ khá»Ÿi táº¡o</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">tong_tien_sau_giam_gia </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> san_pham</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">sum</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">100000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">sp</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> sp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token symbol">:gia</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> sp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token symbol">:so_luong</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 1450000 (thÃªm 100000 vÃ o tá»•ng)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-táº¡o-tá»•-há»£p-vÃ -tÃ­ch-descartes-vá»›i-product">ğŸ² Táº¡o tá»• há»£p vÃ  tÃ­ch Descartes vá»›i product<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-trung-cap/#-t%E1%BA%A1o-t%E1%BB%95-h%E1%BB%A3p-v%C3%A0-t%C3%ADch-descartes-v%E1%BB%9Bi-product" class="hash-link" aria-label="Direct link to ğŸ² Táº¡o tá»• há»£p vÃ  tÃ­ch Descartes vá»›i product" title="Direct link to ğŸ² Táº¡o tá»• há»£p vÃ  tÃ­ch Descartes vá»›i product">â€‹</a></h2>
<p>PhÆ°Æ¡ng thá»©c <code>product</code> giÃºp táº¡o ra táº¥t cáº£ cÃ¡c cáº·p pháº§n tá»­ cÃ³ thá»ƒ cÃ³ tá»« hai hoáº·c nhiá»u máº£ng:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token plain">mau_ao </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'Ä‘á»'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'xanh'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'tráº¯ng'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">kich_co </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'S'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'M'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'L'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'XL'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Táº¡o táº¥t cáº£ cÃ¡c káº¿t há»£p cÃ³ thá»ƒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">san_pham </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> mau_ao</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">product</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">kich_co</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      ["Ä‘á»", "S"], ["Ä‘á»", "M"], ["Ä‘á»", "L"], ["Ä‘á»", "XL"],</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      ["xanh", "S"], ["xanh", "M"], ["xanh", "L"], ["xanh", "XL"],</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#      ["tráº¯ng", "S"], ["tráº¯ng", "M"], ["tráº¯ng", "L"], ["tráº¯ng", "XL"]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">#    ]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Táº¡o tá»• há»£p phá»©c táº¡p hÆ¡n</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">chat_lieu </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'cotton'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'kaki'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">tat_ca_san_pham </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> mau_ao</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">product</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">kich_co</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> chat_lieu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Káº¿t quáº£: Máº£ng 3 chiá»u vá»›i táº¥t cáº£ cÃ¡c káº¿t há»£p cÃ³ thá»ƒ</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-káº¿t-luáº­n">ğŸš€ Káº¿t luáº­n<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-ky-thuat-trung-cap/#-k%E1%BA%BFt-lu%E1%BA%ADn" class="hash-link" aria-label="Direct link to ğŸš€ Káº¿t luáº­n" title="Direct link to ğŸš€ Káº¿t luáº­n">â€‹</a></h2>
<p>CÃ¡c ká»¹ thuáº­t trung cáº¥p nÃ y sáº½ giÃºp báº¡n xá»­ lÃ½ máº£ng trong Ruby má»™t cÃ¡ch hiá»‡u quáº£ vÃ  sÃ¡ng táº¡o hÆ¡n. Viá»‡c náº¯m vá»¯ng nhá»¯ng phÆ°Æ¡ng thá»©c nÃ y khÃ´ng chá»‰ giÃºp code cá»§a báº¡n ngáº¯n gá»n hÆ¡n mÃ  cÃ²n tÄƒng hiá»‡u suáº¥t xá»­ lÃ½ dá»¯ liá»‡u.</p>
<p>HÃ£y thá»­ Ã¡p dá»¥ng nhá»¯ng ká»¹ thuáº­t nÃ y vÃ o dá»± Ã¡n cá»§a báº¡n vÃ  khÃ¡m phÃ¡ sá»©c máº¡nh thá»±c sá»± cá»§a máº£ng trong Ruby!</p>
<hr>
<p>Báº¡n Ä‘Ã£ sá»­ dá»¥ng ká»¹ thuáº­t nÃ o trong sá»‘ nÃ y? HÃ£y chia sáº» kinh nghiá»‡m cá»§a báº¡n trong pháº§n bÃ¬nh luáº­n nhÃ©!</p>]]></content:encoded>
            <category>Ruby</category>
            <category>Arrays</category>
            <category>Intermediate</category>
        </item>
        <item>
            <title><![CDATA[KhÃ¡m PhÃ¡ Máº£ng Trong Ruby: HÃ nh Trang Cáº§n Thiáº¿t Cho NgÆ°á»i Má»›i]]></title>
            <link>https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-cho-nguoi-moi-bat-dau/</link>
            <guid>https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-cho-nguoi-moi-bat-dau/</guid>
            <pubDate>Sun, 23 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Ruby Arrays]]></description>
            <content:encoded><![CDATA[<p><img decoding="async" loading="lazy" src="https://images.unsplash.com/photo-1522542550221-31fd19575a2d?ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1350&amp;q=80" alt="Ruby Arrays" class="img_VBoq"></p>
<p>Báº¡n má»›i báº¯t Ä‘áº§u vá»›i Ruby? Báº¡n Ä‘ang loay hoay vá»›i khÃ¡i niá»‡m máº£ng (arrays)? Äá»«ng lo láº¯ng! BÃ i viáº¿t nÃ y sáº½ giÃºp báº¡n náº¯m vá»¯ng nhá»¯ng kiáº¿n thá»©c cÆ¡ báº£n vá» máº£ng trong Ruby má»™t cÃ¡ch dá»… dÃ ng vÃ  thÃº vá»‹.</p>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-táº¡o-máº£ng---bÆ°á»›c-Ä‘áº§u-tiÃªn-trong-cuá»™c-phiÃªu-lÆ°u">ğŸ® Táº¡o máº£ng - BÆ°á»›c Ä‘áº§u tiÃªn trong cuá»™c phiÃªu lÆ°u<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-cho-nguoi-moi-bat-dau/#-t%E1%BA%A1o-m%E1%BA%A3ng---b%C6%B0%E1%BB%9Bc-%C4%91%E1%BA%A7u-ti%C3%AAn-trong-cu%E1%BB%99c-phi%C3%AAu-l%C6%B0u" class="hash-link" aria-label="Direct link to ğŸ® Táº¡o máº£ng - BÆ°á»›c Ä‘áº§u tiÃªn trong cuá»™c phiÃªu lÆ°u" title="Direct link to ğŸ® Táº¡o máº£ng - BÆ°á»›c Ä‘áº§u tiÃªn trong cuá»™c phiÃªu lÆ°u">â€‹</a></h2>
<p>Trong Ruby, báº¡n cÃ³ thá»ƒ táº¡o máº£ng báº±ng hai cÃ¡ch chÃ­nh: sá»­ dá»¥ng cÃº phÃ¡p <code>[]</code> hoáº·c constructor <code>Array.new</code>. Má»—i cÃ¡ch cÃ³ Æ°u Ä‘iá»ƒm riÃªng tÃ¹y vÃ o tÃ¬nh huá»‘ng sá»­ dá»¥ng.</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># CÃ¡ch 1: Sá»­ dá»¥ng cÃº phÃ¡p []</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">trai_cay </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'tÃ¡o'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'chuá»‘i'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'cherry'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># CÃ¡ch 2: Sá»­ dá»¥ng Array.new vá»›i kÃ­ch thÆ°á»›c cá»‘ Ä‘á»‹nh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">o_trong </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">            </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [nil, nil, nil, nil, nil]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># CÃ¡ch 3: Vá»›i giÃ¡ trá»‹ máº·c Ä‘á»‹nh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">so_khong </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Array</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">        </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [0, 0, 0]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-truy-cáº­p-pháº§n-tá»­---tÃ¬m-kho-bÃ¡u-trong-máº£ng">ğŸ” Truy cáº­p pháº§n tá»­ - TÃ¬m kho bÃ¡u trong máº£ng<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-cho-nguoi-moi-bat-dau/#-truy-c%E1%BA%ADp-ph%E1%BA%A7n-t%E1%BB%AD---t%C3%ACm-kho-b%C3%A1u-trong-m%E1%BA%A3ng" class="hash-link" aria-label="Direct link to ğŸ” Truy cáº­p pháº§n tá»­ - TÃ¬m kho bÃ¡u trong máº£ng" title="Direct link to ğŸ” Truy cáº­p pháº§n tá»­ - TÃ¬m kho bÃ¡u trong máº£ng">â€‹</a></h2>
<p>Truy cáº­p pháº§n tá»­ trong máº£ng Ruby ráº¥t linh hoáº¡t. Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng chá»‰ sá»‘ dÆ°Æ¡ng (báº¯t Ä‘áº§u tá»« 0) hoáº·c chá»‰ sá»‘ Ã¢m (Ä‘áº¿m ngÆ°á»£c tá»« cuá»‘i máº£ng).</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token plain">mon_an </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'phá»Ÿ'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'bÃºn cháº£'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'bÃ¡nh mÃ¬'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'cÆ¡m táº¥m'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Truy cáº­p báº±ng chá»‰ sá»‘ dÆ°Æ¡ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mon_an</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">      </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 'phá»Ÿ'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mon_an</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">      </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 'bÃ¡nh mÃ¬'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Truy cáº­p báº±ng chá»‰ sá»‘ Ã¢m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mon_an</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">     </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 'cÆ¡m táº¥m' (pháº§n tá»­ cuá»‘i cÃ¹ng)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mon_an</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">     </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 'bÃºn cháº£'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># PhÆ°Æ¡ng thá»©c first vÃ  last</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mon_an</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">first   </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 'phá»Ÿ'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mon_an</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">last    </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 'cÆ¡m táº¥m'</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-thÃªm-vÃ -xÃ³a-pháº§n-tá»­---Ä‘iá»u-chá»‰nh-kho-bÃ¡u-cá»§a-báº¡n">ğŸ§© ThÃªm vÃ  xÃ³a pháº§n tá»­ - Äiá»u chá»‰nh kho bÃ¡u cá»§a báº¡n<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-cho-nguoi-moi-bat-dau/#-th%C3%AAm-v%C3%A0-x%C3%B3a-ph%E1%BA%A7n-t%E1%BB%AD---%C4%91i%E1%BB%81u-ch%E1%BB%89nh-kho-b%C3%A1u-c%E1%BB%A7a-b%E1%BA%A1n" class="hash-link" aria-label="Direct link to ğŸ§© ThÃªm vÃ  xÃ³a pháº§n tá»­ - Äiá»u chá»‰nh kho bÃ¡u cá»§a báº¡n" title="Direct link to ğŸ§© ThÃªm vÃ  xÃ³a pháº§n tá»­ - Äiá»u chá»‰nh kho bÃ¡u cá»§a báº¡n">â€‹</a></h2>
<p>Ruby cung cáº¥p nhiá»u phÆ°Æ¡ng thá»©c Ä‘á»ƒ thÃªm vÃ  xÃ³a pháº§n tá»­ trong máº£ng:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token plain">danh_sach </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'há»c Ruby'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'lÃ m bÃ i táº­p'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># ThÃªm pháº§n tá»­ vÃ o cuá»‘i máº£ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">danh_sach</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">push</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'Ä‘á»c sÃ¡ch'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">        </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; ['há»c Ruby', 'lÃ m bÃ i táº­p', 'Ä‘á»c sÃ¡ch']</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">danh_sach </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'nghe nháº¡c'</span><span class="token plain">          </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; ['há»c Ruby', 'lÃ m bÃ i táº­p', 'Ä‘á»c sÃ¡ch', 'nghe nháº¡c']</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># ThÃªm pháº§n tá»­ vÃ o Ä‘áº§u máº£ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">danh_sach</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">unshift</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'thá»©c dáº­y sá»›m'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; ['thá»©c dáº­y sá»›m', 'há»c Ruby', 'lÃ m bÃ i táº­p', 'Ä‘á»c sÃ¡ch', 'nghe nháº¡c']</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># XÃ³a pháº§n tá»­ cuá»‘i cÃ¹ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">phan_tu_cuoi </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> danh_sach</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">pop      </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 'nghe nháº¡c'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># XÃ³a pháº§n tá»­ Ä‘áº§u tiÃªn</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">phan_tu_dau </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> danh_sach</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">shift     </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; 'thá»©c dáº­y sá»›m'</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-láº·p-qua-máº£ng---khÃ¡m-phÃ¡-tá»«ng-ngÃ³c-ngÃ¡ch">ğŸ”„ Láº·p qua máº£ng - KhÃ¡m phÃ¡ tá»«ng ngÃ³c ngÃ¡ch<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-cho-nguoi-moi-bat-dau/#-l%E1%BA%B7p-qua-m%E1%BA%A3ng---kh%C3%A1m-ph%C3%A1-t%E1%BB%ABng-ng%C3%B3c-ng%C3%A1ch" class="hash-link" aria-label="Direct link to ğŸ”„ Láº·p qua máº£ng - KhÃ¡m phÃ¡ tá»«ng ngÃ³c ngÃ¡ch" title="Direct link to ğŸ”„ Láº·p qua máº£ng - KhÃ¡m phÃ¡ tá»«ng ngÃ³c ngÃ¡ch">â€‹</a></h2>
<p>Duyá»‡t qua cÃ¡c pháº§n tá»­ trong máº£ng lÃ  má»™t thao tÃ¡c phá»• biáº¿n. Ruby cung cáº¥p nhiá»u cÃ¡ch Ä‘á»ƒ thá»±c hiá»‡n Ä‘iá»u nÃ y:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token plain">mau_sac </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'Ä‘á»'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'xanh lÃ¡'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'vÃ ng'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'tÃ­m'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Sá»­ dá»¥ng each</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mau_sac</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">each</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">mau</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  puts </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"TÃ´i thÃ­ch mÃ u </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">mau</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Sá»­ dá»¥ng each_with_index</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mau_sac</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">each_with_index </span><span class="token keyword" style="color:rgb(86, 156, 214)">do</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">mau</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> index</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  puts </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"MÃ u thá»© </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">index </span><span class="token string-literal interpolation content operator" style="color:rgb(212, 212, 212)">+</span><span class="token string-literal interpolation content"> </span><span class="token string-literal interpolation content number" style="color:rgb(181, 206, 168)">1</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)"> lÃ : </span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">#{</span><span class="token string-literal interpolation content">mau</span><span class="token string-literal interpolation delimiter punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token string-literal string" style="color:rgb(206, 145, 120)">"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-biáº¿n-Ä‘á»•i-máº£ng---phÃ©p-thuáº­t-vá»›i-map-vÃ -select">ğŸ§ª Biáº¿n Ä‘á»•i máº£ng - PhÃ©p thuáº­t vá»›i map vÃ  select<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-cho-nguoi-moi-bat-dau/#-bi%E1%BA%BFn-%C4%91%E1%BB%95i-m%E1%BA%A3ng---ph%C3%A9p-thu%E1%BA%ADt-v%E1%BB%9Bi-map-v%C3%A0-select" class="hash-link" aria-label="Direct link to ğŸ§ª Biáº¿n Ä‘á»•i máº£ng - PhÃ©p thuáº­t vá»›i map vÃ  select" title="Direct link to ğŸ§ª Biáº¿n Ä‘á»•i máº£ng - PhÃ©p thuáº­t vá»›i map vÃ  select">â€‹</a></h2>
<p>Ruby cung cáº¥p cÃ¡c phÆ°Æ¡ng thá»©c máº¡nh máº½ Ä‘á»ƒ biáº¿n Ä‘á»•i máº£ng:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token plain">so </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Sá»­ dá»¥ng map Ä‘á»ƒ biáº¿n Ä‘á»•i má»—i pháº§n tá»­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">binh_phuong </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> so</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">map </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">n</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> n </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> n </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [1, 4, 9, 16, 25]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Sá»­ dá»¥ng select Ä‘á»ƒ lá»c pháº§n tá»­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">so_chan </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> so</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">select </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain">n</span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">even</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [2, 4]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Káº¿t há»£p cÃ¡c máº£ng</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">so_khac </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">6</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">tat_ca </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> so </span><span class="token operator" style="color:rgb(212, 212, 212)">+</span><span class="token plain"> so_khac              </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-lÃ m-sáº¡ch-máº£ng---dá»n-dáº¹p-kho-bÃ¡u">ğŸ§¹ LÃ m sáº¡ch máº£ng - Dá»n dáº¹p kho bÃ¡u<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-cho-nguoi-moi-bat-dau/#-l%C3%A0m-s%E1%BA%A1ch-m%E1%BA%A3ng---d%E1%BB%8Dn-d%E1%BA%B9p-kho-b%C3%A1u" class="hash-link" aria-label="Direct link to ğŸ§¹ LÃ m sáº¡ch máº£ng - Dá»n dáº¹p kho bÃ¡u" title="Direct link to ğŸ§¹ LÃ m sáº¡ch máº£ng - Dá»n dáº¹p kho bÃ¡u">â€‹</a></h2>
<p>ÄÃ´i khi báº¡n cáº§n loáº¡i bá» cÃ¡c pháº§n tá»­ khÃ´ng mong muá»‘n:</p>
<div class="language-ruby codeBlockContainer_fd20 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_z5HD"><pre tabindex="0" class="prism-code language-ruby codeBlock_PbU4 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_ZkdA"><span class="token-line" style="color:#9CDCFE"><span class="token plain">du_lieu </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">nil</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">nil</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'a'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(206, 145, 120)">'b'</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">nil</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Loáº¡i bá» nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">du_lieu_sach </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> du_lieu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">compact    </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [1, 2, 3, 'a', 'b']</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Loáº¡i bá» pháº§n tá»­ trÃ¹ng láº·p</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mang_trung </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mang_duy_nhat </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> mang_trung</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">uniq   </span><span class="token comment" style="color:rgb(106, 153, 85)"># =&gt; [1, 2, 3, 4]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_aa2m" id="-káº¿t-luáº­n">ğŸ¯ Káº¿t luáº­n<a href="https://ojisanchamchi.github.io/keep-being-human-dev/blog/ruby-arrays-cho-nguoi-moi-bat-dau/#-k%E1%BA%BFt-lu%E1%BA%ADn" class="hash-link" aria-label="Direct link to ğŸ¯ Káº¿t luáº­n" title="Direct link to ğŸ¯ Káº¿t luáº­n">â€‹</a></h2>
<p>Máº£ng lÃ  má»™t trong nhá»¯ng cáº¥u trÃºc dá»¯ liá»‡u cÆ¡ báº£n vÃ  quan trá»ng nháº¥t trong Ruby. Náº¯m vá»¯ng cÃ¡ch sá»­ dá»¥ng máº£ng sáº½ giÃºp báº¡n xÃ¢y dá»±ng cÃ¡c á»©ng dá»¥ng Ruby hiá»‡u quáº£ hÆ¡n. HÃ£y thá»±c hÃ nh cÃ¡c vÃ­ dá»¥ trÃªn vÃ  khÃ¡m phÃ¡ thÃªm cÃ¡c phÆ°Æ¡ng thá»©c khÃ¡c cá»§a máº£ng trong Ruby.</p>
<p>Báº¡n Ä‘Ã£ sáºµn sÃ ng tiáº¿n xa hÆ¡n trong hÃ nh trÃ¬nh há»c Ruby? HÃ£y theo dÃµi cÃ¡c bÃ i viáº¿t tiáº¿p theo cá»§a chÃºng tÃ´i vá» cÃ¡c chá»§ Ä‘á» nÃ¢ng cao hÆ¡n!</p>
<hr>
<p>Báº¡n cÃ³ cÃ¢u há»i hoáº·c Ã½ kiáº¿n? HÃ£y Ä‘á»ƒ láº¡i bÃ¬nh luáº­n bÃªn dÆ°á»›i nhÃ©!</p>]]></content:encoded>
            <category>Ruby</category>
            <category>Arrays</category>
            <category>Beginner</category>
        </item>
    </channel>
</rss>